const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/MaterialAttributes-Dq8Sl3yF.js","static/js/index-DgigFOm-.js","static/css/index-m-ApgcvE.css","static/css/MaterialAttributes-DhngISA7.css","static/js/ComponentAttributes-B7RnJH_P.js","static/css/ComponentAttributes-ldDARhvH.css","static/js/ServiceAttributes-DVQ-1iGR.js","static/css/ServiceAttributes-BpQuufHy.css"])))=>i.map(i=>d[i]);
import{_ as se,r as p,g as U,a1 as ne,H as G,h as ce,a as f,c as Q,o as V,b as t,w as l,e as S,l as me,s as _e,F as ie,n as re,m as de,f as be,t as ue,k as ge,a3 as ye,a4 as ve,$ as Ce,ar as j,G as Ve,E as Se,a2 as W}from"./index-DgigFOm-.js";import{listProduct as De}from"./product-C-f__cve.js";const he={class:"icon-selector"},Ne={class:"icon-input-wrapper"},Te={class:"icon-selector-content"},xe={class:"category-tabs"},Qe={class:"icons-container"},Ue={class:"icons-grid"},Ee=["onClick"],ke={class:"icon-name"},Pe={key:0,class:"no-icons"},Ae={__name:"IconSelector",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(w,{emit:B}){const d=w,A=B,h=p(!1),e=p(""),N=p("全部"),g=p(d.modelValue),E={操作:["Add","Delete","Edit","Search","Refresh","Save","Upload","Download","Print","Copy","Paste","Cut","Clear","Close","Open","Lock","Unlock","Check","CircleCheck","CircleClose","CirclePlus","CircleMinus","Check"],导航:["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","DoubleArrowLeft","DoubleArrowRight","DoubleArrowUp","DoubleArrowDown","Back","Next","Top","Bottom","Left","Right","Menu","SubMenu","Expand","Fold","FullScreen","ExitFullScreen","Home","Location","Flag"],状态:["Success","Warning","Error","Info","Question","Loading","LoadingFull","View","Hide","Eye","EyeClose","Bell","Message","Star","StarFilled","Like","LikeFilled","Dislike","DislikeFilled","Rank","RankFilled"],对象:["Document","DocumentCopy","DocumentDelete","DocumentEdit","DocumentRemove","DocumentAdd","File","FileAdd","FileDelete","FileEdit","FileRemove","Folder","FolderAdd","FolderDelete","FolderEdit","FolderRemove","FolderOpened","Picture","PictureFilled","Video","Camera","Music","Message","Mail","Phone","Monitor","Mobile","Printer","Scanner","HardDrive","Microchip","Cpu","Memory","Storage","Battery","BatteryCharging","Signal","Wifi","Bluetooth"],符号:["Plus","Minus","Times","Divide","Equals","NotEqual","Greater","GreaterEqual","Less","LessEqual","Percent","Dollar","Yen","Euro","Pound","At","Hash","Asterisk","Exclamation","Question","Quote","Apostrophe","Comma","Period","Colon","Semicolon","Slash","Backslash","Pipe","Underscore","Hyphen","PlusCircle","MinusCircle","CloseCircle","CheckCircle","InfoCircle","WarningCircle","ErrorCircle","QuestionCircle"],图形:["Circle","CircleFilled","Ellipsis","EllipsisHorizontal","EllipsisVertical","Square","SquareFilled","Rectangle","Triangle","TriangleFilled","Diamond","DiamondFilled","Star","StarFilled","Heart","HeartFilled","ThumbsUp","ThumbsDown","Check","Close","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],其他:["Setting","Tools","Brush","Palette","MagicStick","Bell","Notification","Message","Comment","ChatDotRound","ChatLineRound","ChatDotSquare","ChatLineSquare","Postcard","Reading","DataAnalysis","Histogram","PieChart","LineChart","Monitor","Mobile","Tablet","Laptop","Cpu","Memory","HardDrive","Storage","Printer","Scanner","Camera","VideoCamera","Microphone","Headset","Speaker","Volume","Mute","SwitchButton","ToggleRight","ToggleLeft"]},I=p([]),k=p(["全部",...Object.keys(E)]),M=()=>{const m=[];for(const[c,y]of Object.entries(ne)){if(c.startsWith("__")||typeof y!="object")continue;let C="其他";for(const[T,x]of Object.entries(E))if(x.includes(c)){C=T;break}m.push({name:c,component:y,category:C})}I.value=m},v=U(()=>I.value.filter(m=>{const c=m.name.toLowerCase().includes(e.value.toLowerCase()),y=N.value==="全部"||m.category===N.value;return c&&y})),F=U(()=>g.value&&ne[g.value]||null);G(()=>d.modelValue,m=>{g.value=m});const H=m=>{A("update:modelValue",m)},u=()=>{},$=m=>{g.value=m.name,A("update:modelValue",m.name),h.value=!1};return ce(()=>{M()}),(m,c)=>{const y=f("el-button"),C=f("el-input"),T=f("el-tag"),x=f("el-icon"),R=f("el-scrollbar"),q=f("el-popover");return V(),Q("div",he,[t(q,{visible:h.value,"onUpdate:visible":c[3]||(c[3]=s=>h.value=s),placement:"bottom",width:600,trigger:"click"},{reference:l(()=>[S("div",Ne,[t(C,{modelValue:g.value,"onUpdate:modelValue":c[1]||(c[1]=s=>g.value=s),placeholder:"选择或输入图标名称",onInput:H,readonly:"","prefix-icon":F.value},{append:l(()=>[t(y,{type:"primary",icon:"Search",onClick:c[0]||(c[0]=s=>h.value=!0)})]),_:1},8,["modelValue","prefix-icon"])])]),default:l(()=>[S("div",Te,[t(C,{modelValue:e.value,"onUpdate:modelValue":c[2]||(c[2]=s=>e.value=s),placeholder:"搜索图标...",clearable:"",onInput:u,"prefix-icon":me(_e),class:"search-input"},null,8,["modelValue","prefix-icon"]),S("div",xe,[(V(!0),Q(ie,null,re(k.value,s=>(V(),de(T,{key:s,type:N.value===s?"primary":"",effect:"light",onClick:L=>N.value=s,class:"category-tag"},{default:l(()=>[be(ue(s),1)]),_:2},1032,["type","onClick"]))),128))]),S("div",Qe,[t(R,{height:"400px"},{default:l(()=>[S("div",Ue,[(V(!0),Q(ie,null,re(v.value,s=>(V(),Q("div",{key:s.name,class:ye(["icon-item",{"icon-item-selected":s.name===g.value}]),onClick:L=>$(s)},[t(x,{size:24},{default:l(()=>[(V(),de(ve(s.component)))]),_:2},1024),S("span",ke,ue(s.name),1)],10,Ee))),128)),v.value.length===0?(V(),Q("div",Pe," 未找到匹配的图标 ")):ge("",!0)])]),_:1})])])]),_:1},8,["visible"])])}}},Ie=se(Ae,[["__scopeId","data-v-630bc1c0"]]),Me={class:"bom-node-info-detail"},Fe={class:"node-basic-info-section"},Re={__name:"BomNodeInfoDetail",props:{bomId:{type:[String,Number],required:!0},bomStructureId:{type:[String,Number],required:!0},selectedNode:{type:Object,required:!0}},emits:["node-updated"],setup(w,{emit:B}){var m,c,y,C,T,x,R,q,s,L,Y,J,K,X,Z,ee,te,le,oe,ae;const d=w,A=p(null),h={nodeCode:[{required:!0,message:"请输入节点编码",trigger:"blur"}],nodeName:[{required:!0,message:"请输入节点名称",trigger:"blur"}],nodeType:[{required:!0,message:"请选择节点类型",trigger:"change"}],nodeStatus:[{required:!0,message:"请选择节点状态",trigger:"change"}]},e=Ce({nodeCode:((m=d.selectedNode)==null?void 0:m.nodeCode)||"",nodeName:((c=d.selectedNode)==null?void 0:c.nodeName)||"",nodeType:((y=d.selectedNode)==null?void 0:y.nodeType)||"0",nodeStatus:((C=d.selectedNode)==null?void 0:C.nodeStatus)||"active",selectionType:((T=d.selectedNode)==null?void 0:T.selectionType)||"single",isRequired:((x=d.selectedNode)==null?void 0:x.isRequired)||"0",minSelection:((R=d.selectedNode)==null?void 0:R.minSelection)||0,maxSelection:((q=d.selectedNode)==null?void 0:q.maxSelection)||999,defaultQuantity:((s=d.selectedNode)==null?void 0:s.defaultQuantity)||1,minQuantity:((L=d.selectedNode)==null?void 0:L.minQuantity)||0,maxQuantity:((Y=d.selectedNode)==null?void 0:Y.maxQuantity)||999,isQuantityEditable:((J=d.selectedNode)==null?void 0:J.isQuantityEditable)||"0",enableDynamicAttributes:((K=d.selectedNode)==null?void 0:K.enableDynamicAttributes)||"0",generateTempPartNumber:((X=d.selectedNode)==null?void 0:X.generateTempPartNumber)||"0",iconUrl:((Z=d.selectedNode)==null?void 0:Z.iconUrl)||"",nodeColor:((ee=d.selectedNode)==null?void 0:ee.nodeColor)||"",price:((te=d.selectedNode)==null?void 0:te.price)||0,parentNodeId:((le=d.selectedNode)==null?void 0:le.parentNodeId)||"",sortOrder:((oe=d.selectedNode)==null?void 0:oe.sortOrder)||0,nodeDescription:((ae=d.selectedNode)==null?void 0:ae.nodeDescription)||""});p("attribute");const N=U(()=>({...d.selectedNode,...e})),g={0:j(()=>W(()=>import("./MaterialAttributes-Dq8Sl3yF.js"),__vite__mapDeps([0,1,2,3]))),1:j(()=>W(()=>import("./ComponentAttributes-B7RnJH_P.js"),__vite__mapDeps([4,1,2,5]))),2:j(()=>W(()=>import("./ServiceAttributes-DVQ-1iGR.js"),__vite__mapDeps([6,1,2,7])))};U(()=>g[N.value.nodeType]||null);const E=p([]);p([]),p(!1),p(null),p([]);const I=p([]),k=p(!1),M=p([]);U(()=>[]),U(()=>E.value);let v=!1;const F=async()=>{if(v){k.value=!0;try{const n=await De({pageNum:1,pageSize:100});v&&(M.value=n.rows||[],H(),k.value=!1)}catch(n){console.error("加载产品列表失败:",n),v&&(Se.error("加载产品列表失败"),k.value=!1)}}},H=()=>{let n=[...M.value];I.value=n},u=()=>{const n={bomStructureId:d.bomStructureId,nodeCode:e.nodeCode,nodeName:e.nodeName,nodeType:e.nodeType,nodeStatus:e.nodeStatus,selectionType:e.selectionType,isRequired:e.isRequired,minSelection:e.minSelection,maxSelection:e.maxSelection,defaultQuantity:e.defaultQuantity,minQuantity:e.minQuantity,maxQuantity:e.maxQuantity,isQuantityEditable:e.isQuantityEditable,enableDynamicAttributes:e.enableDynamicAttributes,generateTempPartNumber:e.generateTempPartNumber,iconUrl:e.iconUrl,nodeColor:e.nodeColor,price:e.price,parentNodeId:e.parentNodeId,sortOrder:e.sortOrder,nodeDescription:e.nodeDescription};$("node-updated",n)};G(()=>d.selectedNode,n=>{e.nodeCode=n.nodeCode||"",e.nodeName=n.nodeName||"",e.nodeType=n.nodeType||"0",e.nodeStatus=n.nodeStatus||"active",e.selectionType=n.selectionType||"single",e.isRequired=n.isRequired||"0",e.minSelection=n.minSelection||0,e.maxSelection=n.maxSelection||999,e.defaultQuantity=n.defaultQuantity||1,e.minQuantity=n.minQuantity||0,e.maxQuantity=n.maxQuantity||999,e.isQuantityEditable=n.isQuantityEditable||"0",e.enableDynamicAttributes=n.enableDynamicAttributes||"0",e.generateTempPartNumber=n.generateTempPartNumber||"0",e.iconUrl=n.iconUrl||"",e.nodeColor=n.nodeColor||"",e.price=n.price||0,e.parentNodeId=n.parentNodeId||"",e.sortOrder=n.sortOrder||0,e.nodeDescription=n.nodeDescription||"",E.value=[],F()},{deep:!0}),G(()=>[e.selectionType,e.minSelection,e.maxSelection],([n,o,P])=>{if(n==="single")console.log("选择类型为单选，自动设置minSelection和maxSelection为1"),e.minSelection=1,e.maxSelection=1;else{let i=Number(o);i=isNaN(i)?0:Math.floor(i),i=Math.max(0,i);let r=Number(P);r=isNaN(r)?999:Math.floor(r),r=Math.max(1,r),i>r&&(i=r),e.minSelection=i,e.maxSelection=r,console.log(`多选配置已归一化: minSelection=${i}, maxSelection=${r}`)}},{deep:!0}),ce(()=>{v=!0,F()}),Ve(()=>{v=!1});const $=B;return(n,o)=>{const P=f("el-input"),i=f("el-form-item"),r=f("el-col"),b=f("el-row"),_=f("el-option"),z=f("el-select"),O=f("el-switch"),D=f("el-input-number"),pe=f("el-color-picker"),fe=f("el-form");return V(),Q("div",Me,[S("div",Fe,[o[19]||(o[19]=S("div",{class:"section-title"},"节点基础信息",-1)),t(fe,{ref_key:"formRef",ref:A,model:e,rules:h,"label-width":"150px",class:"node-basic-form"},{default:l(()=>[t(b,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(i,{label:"节点编码",prop:"nodeCode"},{default:l(()=>[t(P,{modelValue:e.nodeCode,"onUpdate:modelValue":o[0]||(o[0]=a=>e.nodeCode=a),placeholder:"请输入节点编码",onChange:u,disabled:!0},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:l(()=>[t(i,{label:"节点名称",prop:"nodeName"},{default:l(()=>[t(P,{modelValue:e.nodeName,"onUpdate:modelValue":o[1]||(o[1]=a=>e.nodeName=a),placeholder:"请输入节点名称",onChange:u},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(i,{label:"节点类型",prop:"nodeType"},{default:l(()=>[t(z,{modelValue:e.nodeType,"onUpdate:modelValue":o[2]||(o[2]=a=>e.nodeType=a),placeholder:"请选择节点类型",onChange:u},{default:l(()=>[t(_,{label:"物料",value:"0"}),t(_,{label:"组件",value:"1"}),t(_,{label:"服务",value:"2"}),t(_,{label:"参数要求",value:"3"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:l(()=>[t(i,{label:"节点状态",prop:"nodeStatus"},{default:l(()=>[t(z,{modelValue:e.nodeStatus,"onUpdate:modelValue":o[3]||(o[3]=a=>e.nodeStatus=a),placeholder:"请选择节点状态",onChange:u},{default:l(()=>[t(_,{label:"激活",value:"active"}),t(_,{label:"停用",value:"inactive"}),t(_,{label:"草稿",value:"draft"}),t(_,{label:"已批准",value:"approved"}),t(_,{label:"已弃用",value:"deprecated"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(i,{label:"选择类型",prop:"selectionType"},{default:l(()=>[t(z,{modelValue:e.selectionType,"onUpdate:modelValue":o[4]||(o[4]=a=>e.selectionType=a),placeholder:"请选择选择类型",onChange:u},{default:l(()=>[t(_,{label:"单选",value:"single"}),t(_,{label:"多选",value:"multiple"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:l(()=>[t(i,{label:"是否必选",prop:"isRequired"},{default:l(()=>[t(O,{modelValue:e.isRequired,"onUpdate:modelValue":o[5]||(o[5]=a=>e.isRequired=a),"active-value":"1","inactive-value":"0",onChange:u},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(i,{label:"最少选择",prop:"minSelection"},{default:l(()=>[t(D,{modelValue:e.minSelection,"onUpdate:modelValue":o[6]||(o[6]=a=>e.minSelection=a),min:0,step:1,onChange:u},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:l(()=>[t(i,{label:"最多选择",prop:"maxSelection"},{default:l(()=>[t(D,{modelValue:e.maxSelection,"onUpdate:modelValue":o[7]||(o[7]=a=>e.maxSelection=a),min:0,step:1,onChange:u},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(i,{label:"默认数量",prop:"defaultQuantity"},{default:l(()=>[t(D,{modelValue:e.defaultQuantity,"onUpdate:modelValue":o[8]||(o[8]=a=>e.defaultQuantity=a),min:0,step:.1,onChange:u},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:l(()=>[t(i,{label:"数量是否可编辑",prop:"isQuantityEditable"},{default:l(()=>[t(O,{modelValue:e.isQuantityEditable,"onUpdate:modelValue":o[9]||(o[9]=a=>e.isQuantityEditable=a),"active-value":"1","inactive-value":"0",onChange:u},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(i,{label:"最小数量",prop:"minQuantity"},{default:l(()=>[t(D,{modelValue:e.minQuantity,"onUpdate:modelValue":o[10]||(o[10]=a=>e.minQuantity=a),min:0,step:.1,onChange:u},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:l(()=>[t(i,{label:"最大数量",prop:"maxQuantity"},{default:l(()=>[t(D,{modelValue:e.maxQuantity,"onUpdate:modelValue":o[11]||(o[11]=a=>e.maxQuantity=a),min:0,step:.1,onChange:u},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(i,{label:"节点排序",prop:"sortOrder"},{default:l(()=>[t(D,{modelValue:e.sortOrder,"onUpdate:modelValue":o[12]||(o[12]=a=>e.sortOrder=a),min:0,step:1,onChange:u},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(i,{label:"是否启用动态属性",prop:"enableDynamicAttributes"},{default:l(()=>[t(O,{modelValue:e.enableDynamicAttributes,"onUpdate:modelValue":o[13]||(o[13]=a=>e.enableDynamicAttributes=a),"active-value":"1","inactive-value":"0",onChange:u},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:l(()=>[t(i,{label:"是否生成临时料号",prop:"generateTempPartNumber"},{default:l(()=>[t(O,{modelValue:e.generateTempPartNumber,"onUpdate:modelValue":o[14]||(o[14]=a=>e.generateTempPartNumber=a),"active-value":"1","inactive-value":"0",onChange:u},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(i,{label:"节点图标",prop:"iconUrl"},{default:l(()=>[t(me(Ie),{modelValue:e.iconUrl,"onUpdate:modelValue":[o[15]||(o[15]=a=>e.iconUrl=a),u]},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:l(()=>[t(i,{label:"节点颜色",prop:"nodeColor"},{default:l(()=>[t(pe,{modelValue:e.nodeColor,"onUpdate:modelValue":o[16]||(o[16]=a=>e.nodeColor=a),onChange:u},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(r,{span:12},{default:l(()=>[t(i,{label:"节点价格",prop:"price"},{default:l(()=>[t(D,{modelValue:e.price,"onUpdate:modelValue":o[17]||(o[17]=a=>e.price=a),min:0,step:.01,onChange:u,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(i,{label:"节点描述",prop:"nodeDescription"},{default:l(()=>[t(P,{modelValue:e.nodeDescription,"onUpdate:modelValue":o[18]||(o[18]=a=>e.nodeDescription=a),type:"textarea",rows:3,placeholder:"请输入节点描述",onChange:u},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])])}}},Oe=se(Re,[["__scopeId","data-v-b9fcd655"]]);export{Oe as default};
