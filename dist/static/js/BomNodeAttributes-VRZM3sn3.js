import{m as $e,g as je,h as Oe,n as Ge,o as Ke,p as We,q as Ze}from"./bom-DGXmvyiB.js";import{_ as Je,M as Qe,r as c,g as R,h as Xe,i as Ye,a as v,j as et,c as h,o as d,e as p,k as oe,b as l,w as o,f as m,m as b,t as V,q as L,F as q,s as E,N as ae,H as ne,E as i,n as Q}from"./index-a6CENfl-.js";const tt={class:"bom-node-attributes"},lt={class:"management-header"},ot={class:"header-buttons"},at={style:{"margin-bottom":"16px",padding:"10px","background-color":"#f5f7fa","border-radius":"4px"}},nt={style:{"font-weight":"bold"}},rt={style:{"margin-left":"10px"}},st={class:"dialog-footer"},ut={class:"attribute-value-container"},dt={class:"attribute-value-header"},it={key:0,style:{display:"flex","align-items":"center"}},mt={key:2,style:{flex:"1","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},ct={key:1,style:{color:"#909399"}},pt={style:{"margin-top":"10px"}},vt={class:"dialog-footer"},yt={class:"icon-library-header"},gt={class:"icon-library-container"},ft=["onClick"],bt=["innerHTML"],wt={class:"icon-name"},ht={class:"dialog-footer"},Vt={__name:"BomNodeAttributes",props:{bomId:{type:[String,Number],required:!0},bomStructureId:{type:[String,Number],default:""},nodeName:{type:String,default:""}},setup(re){const f=re,{proxy:se}=Qe(),{component_type:X,sys_normal_disable:ue}=se.useDict("component_type","sys_normal_disable"),T=c(!1),S=c([]),_=c(!1),H=c("新增属性"),$=c(null),x=c([]),j=c(!1),z=c(!1),C=c([]),O=c(null),k=c(!1),G=c("新增属性值"),K=c(null),de=R({valueCode:[],valueName:[{required:!0,message:"属性值名称不能为空",trigger:"blur"}],isDefault:[{required:!0,message:"请选择是否默认",trigger:"change"}],imgUrl:[{type:"string",message:"图片URL必须是字符串",trigger:"blur"}]}),ie=c([]),s=R({id:null,attributeId:null,valueCode:"",valueName:"",imgUrl:"",isDefault:"0"}),n=R({id:null,bomId:f.bomId,bomStructureId:f.bomStructureId,attributeCode:"",attributeName:"",componentType:"input",stepValue:"",minValue:"",maxValue:"",showTooltip:"0",isRequired:"0",defaultValue:""}),M=async()=>{T.value=!0;try{const t=await $e({bomId:f.bomId,bomStructureId:f.bomStructureId});x.value=t.rows||[],console.log("response.data:",t.rows),console.log("attributeList:",x.value),T.value=!1}catch(t){console.error("加载属性列表失败:",t),i.error("加载属性列表失败"),T.value=!1}};Xe(()=>f.bomStructureId,t=>{console.log("bomStructureId:",t),t!=null&&t!==""&&(n.bomStructureId=t,console.log("bomStructureId:",t),M())},{immediate:!0}),Ye(()=>{M()});const me=R({attributeName:[{required:!0,message:"属性名称不能为空",trigger:"blur"}],componentType:[{required:!0,message:"请选择组件类型",trigger:"change"}],isRequired:[{required:!0,message:"请选择是否必填",trigger:"change"}]}),ce=t=>{const e=X.value.find(u=>u.value===t);return e?e.label:t},pe=t=>({input:"primary",select:"info",radio:"success",checkbox:"warning",date:"danger",datetime:"purple",number:"blue",slider:"green",switch:"orange",textarea:"cyan"})[t]||"default",ve=t=>{S.value=t},ye=()=>{he(),H.value="新增属性",_.value=!0},ge=t=>{const e={...t,attributeCode:t.attributeCode,attributeName:t.attributeName,isRequired:t.required!==void 0?t.required?"1":"0":t.isRequired||"0"};Object.assign(n,e),n.bomStructureId=f.bomStructureId,H.value="编辑属性",_.value=!0},fe=async t=>{try{await Q.confirm(`确定要删除属性 "${t.attributeName}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),x.value=x.value.filter(e=>e.id!==t.id),i.success("属性删除成功")}catch(e){e!=="cancel"&&(i.error("删除失败"),console.error("删除属性失败:",e))}},be=async()=>{if(S.value.length!==0)try{await Q.confirm(`确定要删除选中的 ${S.value.length} 个属性吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const t=S.value.map(e=>e.id);x.value=x.value.filter(e=>!t.includes(e.id)),S.value=[],i.success("批量删除成功")}catch(t){t!=="cancel"&&(i.error("批量删除失败"),console.error("批量删除属性失败:",t))}},we=async()=>{try{await $.value.validate();let t=n.bomStructureId;if((t==null||t==="")&&(t=f.bomStructureId),t==null||t===""){i.error("请先选择节点");return}n.bomStructureId=t;const e={...n,id:n.id,isRequired:n.isRequired,description:void 0,attrCode:void 0,attrName:void 0};if(n.id)try{await je(n.bomStructureId,[e]),await M(),i.success("属性更新成功"),_.value=!1}catch(u){console.error("更新属性失败:",u),i.error("更新属性失败")}else try{await Oe([e]),await M(),i.success("属性新增成功"),_.value=!1}catch(u){console.error("新增属性失败:",u),i.error("新增属性失败")}}catch(t){t!==!1&&(i.error("操作失败，请检查表单数据"),console.error("提交属性表单失败:",t))}},he=()=>{var e;const t=n.bomStructureId||f.bomStructureId;(e=$.value)==null||e.resetFields(),n.id=null,n.attributeCode="",n.attributeName="",n.componentType="input",n.stepValue="",n.minValue="",n.maxValue="",n.showTooltip="0",n.isRequired="0",n.defaultValue="",n.bomStructureId=t},Ve=t=>{O.value=t,j.value=!0,Pe(t.id)},Pe=async t=>{z.value=!0;try{const e=await Ze(f.bomStructureId,t);C.value=e.data||[],z.value=!1}catch(e){console.error("加载属性值列表失败:",e),i.error("加载属性值列表失败"),z.value=!1}},_e=()=>{var t,e;s.id=null,s.attributeId=(t=O.value)==null?void 0:t.id,s.valueCode="",s.valueName="",s.imgUrl="",s.isDefault="0",(e=K.value)==null||e.resetFields()},xe=()=>{_e(),G.value="新增属性值",k.value=!0},Ce=t=>{Object.assign(s,{...t}),G.value="编辑属性值",k.value=!0},Se=async t=>{try{await Q.confirm(`确定要删除属性值 "${t.valueName}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await Ge(t.id),C.value=C.value.filter(e=>e.id!==t.id),i.success("属性值删除成功")}catch(e){e!=="cancel"&&(i.error("删除失败"),console.error("删除属性值失败:",e))}},ke=t=>{ie.value=t},Ie=()=>{i.info("图片上传功能开发中，当前使用模拟URL"),s.imgUrl=`https://example.com/image-${Date.now()}.jpg`},A=c(!1),P=c("elementPlus"),I=c(""),Ue=[{label:"Element Plus 图标",value:"elementPlus"},{label:"Material 图标",value:"material"},{label:"Font Awesome",value:"fontAwesome"},{label:"自定义 SVG 图标",value:"customSvg"}],Y=[{name:"Add",code:"Plus",type:"elementPlus"},{name:"编辑",code:"Edit",type:"elementPlus"},{name:"删除",code:"Delete",type:"elementPlus"},{name:"设置",code:"Setting",type:"elementPlus"},{name:"搜索",code:"Search",type:"elementPlus"},{name:"刷新",code:"Refresh",type:"elementPlus"},{name:"保存",code:"Check",type:"elementPlus"},{name:"取消",code:"Close",type:"elementPlus"},{name:"警告",code:"Warning",type:"elementPlus"},{name:"错误",code:"CircleClose",type:"elementPlus"},{name:"成功",code:"CircleCheck",type:"elementPlus"},{name:"信息",code:"CircleInfo",type:"elementPlus"},{name:"上移",code:"Top",type:"elementPlus"},{name:"下移",code:"Bottom",type:"elementPlus"},{name:"左移",code:"Left",type:"elementPlus"},{name:"右移",code:"Right",type:"elementPlus"},{name:"展开",code:"Expand",type:"elementPlus"},{name:"折叠",code:"Fold",type:"elementPlus"},{name:"菜单",code:"Menu",type:"elementPlus"},{name:"首页",code:"House",type:"elementPlus"},{name:"用户",code:"User",type:"elementPlus"},{name:"角色",code:"UserFilled",type:"elementPlus"},{name:"部门",code:"OfficeBuilding",type:"elementPlus"},{name:"权限",code:"Key",type:"elementPlus"},{name:"日志",code:"Document",type:"elementPlus"},{name:"统计",code:"DataAnalysis",type:"elementPlus"},{name:"导出",code:"Download",type:"elementPlus"},{name:"导入",code:"Upload",type:"elementPlus"},{name:"打印",code:"Printer",type:"elementPlus"},{name:"复制",code:"CopyDocument",type:"elementPlus"},{name:"剪切",code:"Scissor",type:"elementPlus"},{name:"粘贴",code:"PaperClip",type:"elementPlus"},{name:"附件",code:"Files",type:"elementPlus"},{name:"链接",code:"Link",type:"elementPlus"},{name:"图片",code:"Picture",type:"elementPlus"},{name:"视频",code:"VideoPlay",type:"elementPlus"},{name:"音乐",code:"Headset",type:"elementPlus"},{name:"文件",code:"Document",type:"elementPlus"},{name:"文件夹",code:"Folder",type:"elementPlus"},{name:"新建文件夹",code:"FolderAdd",type:"elementPlus"},{name:"删除文件夹",code:"FolderDelete",type:"elementPlus"},{name:"共享",code:"Share",type:"elementPlus"},{name:"锁定",code:"Lock",type:"elementPlus"},{name:"解锁",code:"Unlock",type:"elementPlus"},{name:"密码",code:"Key",type:"elementPlus"},{name:"眼睛",code:"View",type:"elementPlus"},{name:"隐藏",code:"Hide",type:"elementPlus"},{name:"筛选",code:"Filter",type:"elementPlus"},{name:"排序",code:"Rank",type:"elementPlus"},{name:"时间",code:"Clock",type:"elementPlus"},{name:"日历",code:"Calendar",type:"elementPlus"},{name:"地图",code:"Location",type:"elementPlus"},{name:"定位",code:"Position",type:"elementPlus"},{name:"手机",code:"Cellphone",type:"elementPlus"},{name:"电话",code:"Phone",type:"elementPlus"},{name:"邮件",code:"Message",type:"elementPlus"},{name:"微信",code:"Wechat",type:"elementPlus"},{name:"支付",code:"CircleCheckFilled",type:"elementPlus"},{name:"购物车",code:"ShoppingCart",type:"elementPlus"},{name:"商品",code:"Box",type:"elementPlus"},{name:"订单",code:"Ticket",type:"elementPlus"},{name:"库存",code:"DataBoard",type:"elementPlus"},{name:"利润",code:"TrendCharts",type:"elementPlus"},{name:"销售",code:"Coin",type:"elementPlus"},{name:"采购",code:"ShoppingBag",type:"elementPlus"},{name:"报表",code:"DataLine",type:"elementPlus"},{name:"图表",code:"DataBar",type:"elementPlus"},{name:"饼图",code:"DataPie",type:"elementPlus"},{name:"仪表盘",code:"DataDashboard",type:"elementPlus"},{name:"设置",code:"Setting",type:"elementPlus"},{name:"主题",code:"Palette",type:"elementPlus"},{name:"语言",code:"Translate",type:"elementPlus"},{name:"帮助",code:"QuestionFilled",type:"elementPlus"},{name:"关于",code:"InfoFilled",type:"elementPlus"},{name:"退出",code:"SwitchButton",type:"elementPlus"},{name:"登录",code:"Avatar",type:"elementPlus"},{name:"注册",code:"UserFilled",type:"elementPlus"},{name:"验证码",code:"View",type:"elementPlus"},{name:"滑块",code:"Slider",type:"elementPlus"},{name:"开关",code:"Switch",type:"elementPlus"},{name:"单选",code:"Radio",type:"elementPlus"},{name:"多选",code:"Checkbox",type:"elementPlus"},{name:"下拉",code:"ArrowDown",type:"elementPlus"},{name:"上拉",code:"ArrowUp",type:"elementPlus"},{name:"左拉",code:"ArrowLeft",type:"elementPlus"},{name:"右拉",code:"ArrowRight",type:"elementPlus"},{name:"下拉菜单",code:"More",type:"elementPlus"},{name:"全屏",code:"FullScreen",type:"elementPlus"},{name:"退出全屏",code:"FullScreenExit",type:"elementPlus"},{name:"缩放",code:"ZoomIn",type:"elementPlus"},{name:"缩小",code:"ZoomOut",type:"elementPlus"},{name:"旋转",code:"RefreshRight",type:"elementPlus"},{name:"加载",code:"Loading",type:"elementPlus"},{name:"成功",code:"SuccessFilled",type:"elementPlus"},{name:"错误",code:"ErrorFilled",type:"elementPlus"},{name:"警告",code:"WarningFilled",type:"elementPlus"},{name:"信息",code:"InfoFilled",type:"elementPlus"}],Ae=[{name:"Home",code:"home",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>'},{name:"Search",code:"search",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>'},{name:"Menu",code:"menu",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>'},{name:"Add",code:"add",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>'},{name:"Delete",code:"delete",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>'},{name:"Edit",code:"edit",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>'},{name:"Save",code:"save",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></svg>'},{name:"Settings",code:"settings",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>'}],De=[{name:"Check",code:"check",type:"fontAwesome",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M437.36 174.75L233.6 378.51c-12.39 12.37-32.57 12.37-44.94 0L74.63 274.9c-12.39-12.37-12.39-32.57 0-44.94l19.66-19.66c12.39-12.37 32.57-12.37 44.94 0L240 303.54l132.75-132.74c12.39-12.37 32.57-12.37 44.94 0l19.66 19.66c12.39 12.37 12.39 32.57 0 44.94z"/></svg>'},{name:"Times",code:"times",type:"fontAwesome",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M289.94 256l95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"/></svg>'},{name:"Star",code:"star",type:"fontAwesome",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"/></svg>'},{name:"Heart",code:"heart",type:"fontAwesome",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>'},{name:"User",code:"user",type:"fontAwesome",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"/></svg>'}],Be=[{name:"Custom Icon 1",code:"custom1",type:"customSvg",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#409eff"/><path d="M12 8l4 4-4 4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'},{name:"Custom Icon 2",code:"custom2",type:"customSvg",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" fill="#67c23a"/><path d="M9 12h6m-3-3v6" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>'},{name:"Custom Icon 3",code:"custom3",type:"customSvg",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5z" fill="#e6a23c"/><path d="M2 17l10 5 10-5" fill="none" stroke="#e6a23c" stroke-width="2"/><path d="M2 12l10 5 10-5" fill="none" stroke="#e6a23c" stroke-width="2"/></svg>'}],D=[...Y,...Ae,...De,...Be],B=c(D.filter(t=>t.type===P.value)),Le=()=>{I.value="",B.value=D.filter(t=>t.type===P.value)},Te=()=>{if(!I.value){B.value=D.filter(e=>e.type===P.value);return}const t=I.value.toLowerCase();B.value=D.filter(e=>e.type===P.value&&e.name.toLowerCase().includes(t))},ze=()=>{P.value="elementPlus",I.value="",B.value=D.filter(t=>t.type===P.value),A.value=!0},Me=t=>{t.type==="elementPlus"?s.imgUrl=t.code:s.imgUrl=t.svg,A.value=!1,i.success("图标选择成功")},Ne=async()=>{try{await K.value.validate();const t={...s,bomStructureId:f.bomStructureId,attributeValue:s.valueCode||null};if(s.id)try{await Ke(t);const e=C.value.findIndex(u=>u.id===s.id);e!==-1&&(C.value[e]={...s}),i.success("属性值更新成功")}catch(e){console.error("更新属性值失败:",e),i.error("更新属性值失败")}else try{const e=await We(t),u={...s,id:e.id||Date.now()};C.value.push(u),i.success("属性值新增成功")}catch(e){console.error("新增属性值失败:",e),i.error("新增属性值失败")}k.value=!1}catch(t){t!==!1&&(i.error("操作失败，请检查表单数据"),console.error("提交属性值表单失败:",t))}};return(t,e)=>{const u=v("el-button"),y=v("el-table-column"),W=v("el-tag"),ee=v("el-table"),w=v("el-input"),g=v("el-form-item"),U=v("el-option"),N=v("el-select"),Fe=v("el-radio"),Re=v("el-radio-group"),te=v("el-form"),Z=v("el-dialog"),J=v("el-icon"),qe=v("el-image"),Ee=v("Search"),He=v("el-drawer"),le=et("loading");return d(),h("div",tt,[p("div",lt,[e[24]||(e[24]=p("h3",null,"属性信息管理",-1)),p("div",ot,[l(u,{type:"primary",icon:"Plus",onClick:ye},{default:o(()=>e[22]||(e[22]=[m("新增属性")])),_:1,__:[22]}),l(u,{type:"danger",icon:"Delete",onClick:be,disabled:S.value.length===0},{default:o(()=>e[23]||(e[23]=[m("批量删除")])),_:1,__:[23]},8,["disabled"])])]),oe((d(),b(ee,{data:x.value,stripe:"",style:{width:"100%"}},{default:o(()=>[l(y,{type:"selection",width:"55",align:"center",onSelectionChange:ve}),l(y,{label:"属性编码",align:"center",prop:"attributeCode","min-width":"150"}),l(y,{label:"属性名称",align:"center",prop:"attributeName","min-width":"150"}),l(y,{label:"组件类型",align:"center",prop:"componentType",width:"120"},{default:o(r=>[l(W,{type:pe(r.row.componentType)},{default:o(()=>[m(V(ce(r.row.componentType)),1)]),_:2},1032,["type"])]),_:1}),l(y,{label:"是否必填",align:"center",prop:"isRequired",width:"100"},{default:o(r=>[l(W,{type:r.row.isRequired==="1"?"success":"info"},{default:o(()=>[m(V(r.row.isRequired==="1"?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(y,{label:"默认值",align:"center",prop:"defaultValue","min-width":"150","show-overflow-tooltip":""}),l(y,{label:"操作",align:"center",width:"200",fixed:"right"},{default:o(r=>[l(u,{size:"small",type:"primary",icon:"Edit",onClick:a=>ge(r.row)},{default:o(()=>e[25]||(e[25]=[m(" 编辑 ")])),_:2,__:[25]},1032,["onClick"]),l(u,{size:"small",type:"info",icon:"Setting",onClick:a=>Ve(r.row)},{default:o(()=>e[26]||(e[26]=[m(" 属性值 ")])),_:2,__:[26]},1032,["onClick"]),l(u,{size:"small",type:"danger",icon:"Delete",onClick:a=>fe(r.row)},{default:o(()=>e[27]||(e[27]=[m(" 删除 ")])),_:2,__:[27]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[le,T.value]]),l(Z,{title:H.value,modelValue:_.value,"onUpdate:modelValue":e[10]||(e[10]=r=>_.value=r),width:"600px","append-to-body":""},{footer:o(()=>[p("span",st,[l(u,{onClick:e[9]||(e[9]=r=>_.value=!1)},{default:o(()=>e[29]||(e[29]=[m("取消")])),_:1,__:[29]}),l(u,{type:"primary",onClick:we},{default:o(()=>e[30]||(e[30]=[m("确定")])),_:1,__:[30]})])]),default:o(()=>[l(te,{ref_key:"attributeFormRef",ref:$,model:n,rules:me,"label-width":"120px"},{default:o(()=>[p("div",at,[e[28]||(e[28]=m(" 当前节点：")),p("span",nt,V(f.nodeName||"未选择节点"),1),p("span",rt,"节点ID："+V(f.bomStructureId||"未选择节点"),1)]),l(g,{label:"属性编码",prop:"attributeCode"},{default:o(()=>[l(w,{modelValue:n.attributeCode,"onUpdate:modelValue":e[0]||(e[0]=r=>n.attributeCode=r),placeholder:"自动生成",disabled:""},null,8,["modelValue"])]),_:1}),l(g,{label:"属性名称",prop:"attributeName"},{default:o(()=>[l(w,{modelValue:n.attributeName,"onUpdate:modelValue":e[1]||(e[1]=r=>n.attributeName=r),placeholder:"请输入属性名称"},null,8,["modelValue"])]),_:1}),l(g,{label:"组件类型",prop:"componentType"},{default:o(()=>[l(N,{modelValue:n.componentType,"onUpdate:modelValue":e[2]||(e[2]=r=>n.componentType=r),placeholder:"请选择组件类型"},{default:o(()=>[(d(!0),h(q,null,E(ae(X),r=>(d(),b(U,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n.componentType==="slider"||n.componentType==="number"?(d(),b(g,{key:0,label:"最小值",prop:"minValue"},{default:o(()=>[l(w,{modelValue:n.minValue,"onUpdate:modelValue":e[3]||(e[3]=r=>n.minValue=r),placeholder:"请输入最小值"},null,8,["modelValue"])]),_:1})):L("",!0),n.componentType==="slider"||n.componentType==="number"?(d(),b(g,{key:1,label:"最大值",prop:"maxValue"},{default:o(()=>[l(w,{modelValue:n.maxValue,"onUpdate:modelValue":e[4]||(e[4]=r=>n.maxValue=r),placeholder:"请输入最大值"},null,8,["modelValue"])]),_:1})):L("",!0),n.componentType==="slider"?(d(),b(g,{key:2,label:"步进值",prop:"stepValue"},{default:o(()=>[l(w,{modelValue:n.stepValue,"onUpdate:modelValue":e[5]||(e[5]=r=>n.stepValue=r),placeholder:"请输入步进值"},null,8,["modelValue"])]),_:1})):L("",!0),l(g,{label:"是否展示提示",prop:"showTooltip"},{default:o(()=>[l(Re,{modelValue:n.showTooltip,"onUpdate:modelValue":e[6]||(e[6]=r=>n.showTooltip=r)},{default:o(()=>[(d(!0),h(q,null,E(ae(ue),r=>(d(),b(Fe,{key:r.value,label:r.value},{default:o(()=>[m(V(r.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"是否必填",prop:"isRequired"},{default:o(()=>[l(N,{modelValue:n.isRequired,"onUpdate:modelValue":e[7]||(e[7]=r=>n.isRequired=r),placeholder:"请选择"},{default:o(()=>[l(U,{label:"是",value:"1"}),l(U,{label:"否",value:"0"})]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"默认值",prop:"defaultValue"},{default:o(()=>[l(w,{modelValue:n.defaultValue,"onUpdate:modelValue":e[8]||(e[8]=r=>n.defaultValue=r),placeholder:"请输入默认值"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),l(He,{modelValue:j.value,"onUpdate:modelValue":e[21]||(e[21]=r=>j.value=r),title:"属性值管理",direction:"rtl",size:"50%","append-to-body":""},{default:o(()=>{var r;return[p("div",ut,[p("div",dt,[p("h4",null,V((r=O.value)==null?void 0:r.attributeName)+" - 属性值列表",1),l(u,{type:"primary",icon:"Plus",onClick:xe},{default:o(()=>e[31]||(e[31]=[m("新增属性值")])),_:1,__:[31]})]),oe((d(),b(ee,{data:C.value,stripe:"",style:{width:"100%"}},{default:o(()=>[l(y,{type:"selection",width:"55",align:"center",onSelectionChange:ke}),l(y,{label:"属性值编码",align:"center",prop:"valueCode","min-width":"150"}),l(y,{label:"属性值名称",align:"center",prop:"valueName","min-width":"150"}),l(y,{label:"是否默认",align:"center",prop:"isDefault",width:"100"},{default:o(a=>[l(W,{type:a.row.isDefault==="1"?"success":"info"},{default:o(()=>[m(V(a.row.isDefault==="1"?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(y,{label:"图标",align:"center",prop:"imgUrl","min-width":"150"},{default:o(a=>[a.row.imgUrl?(d(),h("div",it,[a.row.imgUrl&&typeof a.row.imgUrl=="string"&&Y.some(F=>F.code===a.row.imgUrl)?(d(),b(J,{key:0,style:{"font-size":"24px","margin-right":"8px",color:"#409eff"}},{default:o(()=>[(d(),b(ne(a.row.imgUrl)))]),_:2},1024)):a.row.imgUrl?(d(),b(qe,{key:1,src:a.row.imgUrl,"preview-src-list":[a.row.imgUrl],style:{width:"30px",height:"30px","margin-right":"8px",cursor:"pointer"},fit:"cover"},null,8,["src","preview-src-list"])):L("",!0),a.row.imgUrl?(d(),h("span",mt,V(a.row.imgUrl),1)):L("",!0)])):(d(),h("span",ct,"无"))]),_:1}),l(y,{label:"操作",align:"center",width:"150",fixed:"right"},{default:o(a=>[l(u,{size:"small",type:"primary",icon:"Edit",onClick:F=>Ce(a.row)},{default:o(()=>e[32]||(e[32]=[m(" 编辑 ")])),_:2,__:[32]},1032,["onClick"]),l(u,{size:"small",type:"danger",icon:"Delete",onClick:F=>Se(a.row)},{default:o(()=>e[33]||(e[33]=[m(" 删除 ")])),_:2,__:[33]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[le,z.value]]),l(Z,{title:G.value,modelValue:k.value,"onUpdate:modelValue":e[16]||(e[16]=a=>k.value=a),width:"500px","append-to-body":""},{footer:o(()=>[p("span",vt,[l(u,{onClick:e[15]||(e[15]=a=>k.value=!1)},{default:o(()=>e[37]||(e[37]=[m("取消")])),_:1,__:[37]}),l(u,{type:"primary",onClick:Ne},{default:o(()=>e[38]||(e[38]=[m("确定")])),_:1,__:[38]})])]),default:o(()=>[l(te,{ref_key:"attributeValueFormRef",ref:K,model:s,rules:de,"label-width":"100px"},{default:o(()=>[l(g,{label:"属性值编码",prop:"valueCode"},{default:o(()=>[l(w,{modelValue:s.valueCode,"onUpdate:modelValue":e[11]||(e[11]=a=>s.valueCode=a),placeholder:"自动生成",disabled:""},null,8,["modelValue"])]),_:1}),l(g,{label:"属性值名称",prop:"valueName"},{default:o(()=>[l(w,{modelValue:s.valueName,"onUpdate:modelValue":e[12]||(e[12]=a=>s.valueName=a),placeholder:"请输入属性值名称"},null,8,["modelValue"])]),_:1}),l(g,{label:"是否默认",prop:"isDefault"},{default:o(()=>[l(N,{modelValue:s.isDefault,"onUpdate:modelValue":e[13]||(e[13]=a=>s.isDefault=a),placeholder:"请选择"},{default:o(()=>[l(U,{label:"是",value:"1"}),l(U,{label:"否",value:"0"})]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"图标/图片URL",prop:"imgUrl"},{default:o(()=>[l(w,{modelValue:s.imgUrl,"onUpdate:modelValue":e[14]||(e[14]=a=>s.imgUrl=a),placeholder:"请输入图片URL或选择Element Plus图标"},null,8,["modelValue"]),p("div",pt,[l(u,{type:"primary",size:"small",onClick:Ie},{default:o(()=>e[34]||(e[34]=[m("上传图片")])),_:1,__:[34]}),l(u,{type:"success",size:"small",onClick:ze},{default:o(()=>e[35]||(e[35]=[m("Element Plus图标库")])),_:1,__:[35]}),e[36]||(e[36]=p("span",{style:{"margin-left":"10px",color:"#909399","font-size":"12px"}}," 支持JPG、PNG格式图片或Element Plus图标 ",-1))])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),l(Z,{title:"图标库",modelValue:A.value,"onUpdate:modelValue":e[20]||(e[20]=a=>A.value=a),width:"900px","append-to-body":""},{footer:o(()=>[p("span",ht,[l(u,{onClick:e[19]||(e[19]=a=>A.value=!1)},{default:o(()=>e[39]||(e[39]=[m("关闭")])),_:1,__:[39]})])]),default:o(()=>[p("div",yt,[l(N,{modelValue:P.value,"onUpdate:modelValue":e[17]||(e[17]=a=>P.value=a),placeholder:"选择图标库",size:"small",onChange:Le,style:{"margin-right":"10px"}},{default:o(()=>[(d(),h(q,null,E(Ue,a=>l(U,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l(w,{modelValue:I.value,"onUpdate:modelValue":e[18]||(e[18]=a=>I.value=a),placeholder:"搜索图标",size:"small",onInput:Te,clearable:"",style:{width:"200px"}},{prefix:o(()=>[l(J,null,{default:o(()=>[l(Ee)]),_:1})]),_:1},8,["modelValue"])]),p("div",gt,[(d(!0),h(q,null,E(B.value,a=>(d(),h("div",{key:a.code+a.type,class:"icon-item",onClick:F=>Me(a)},[a.type==="elementPlus"?(d(),b(J,{key:0,style:{"font-size":"32px","margin-bottom":"8px",cursor:"pointer",color:"#409eff"}},{default:o(()=>[(d(),b(ne(a.code)))]),_:2},1024)):(d(),h("div",{key:1,class:"svg-icon-preview",style:{"font-size":"32px","margin-bottom":"8px",cursor:"pointer",color:"#409eff"},innerHTML:a.svg},null,8,bt)),p("div",wt,V(a.name),1)],8,ft))),128))])]),_:1},8,["modelValue"])])]}),_:1},8,["modelValue"])])}}},xt=Je(Vt,[["__scopeId","data-v-e37c8ece"]]);export{xt as default};
