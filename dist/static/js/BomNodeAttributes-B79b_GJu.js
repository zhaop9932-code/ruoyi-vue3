import{i as je,j as oe,k as Oe,m as Ge,n as Ke,o as We,p as Qe,q as Ze}from"./bom-CjuVRwkz.js";import{_ as Je,T as Xe,r as p,$ as q,H as Ye,h as et,a as g,i as tt,c as P,o as d,e as v,j as ae,b as l,w as o,f as c,m as b,t as _,k as T,F as E,n as H,l as ne,a4 as re,E as m,Q as J}from"./index-DgigFOm-.js";const lt={class:"bom-node-attributes"},ot={class:"management-header"},at={class:"header-buttons"},nt={style:{"margin-bottom":"16px",padding:"10px","background-color":"#f5f7fa","border-radius":"4px"}},rt={style:{"font-weight":"bold"}},st={style:{"margin-left":"10px"}},ut={class:"dialog-footer"},dt={class:"attribute-value-container"},it={class:"attribute-value-header"},mt={key:0,style:{display:"flex","align-items":"center"}},ct={key:2,style:{flex:"1","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},pt={key:1,style:{color:"#909399"}},vt={style:{"margin-top":"10px"}},gt={class:"dialog-footer"},yt={class:"icon-library-header"},ft={class:"icon-library-container"},bt=["onClick"],wt=["innerHTML"],ht={class:"icon-name"},Pt={class:"dialog-footer"},Vt={__name:"BomNodeAttributes",props:{bomId:{type:[String,Number],required:!0},bomStructureId:{type:[String,Number],default:""},nodeName:{type:String,default:""}},setup(se){const y=se,{proxy:ue}=Xe(),{component_type:X,sys_normal_disable:de}=ue.useDict("component_type","sys_normal_disable"),z=p(!1),S=p([]),C=p(!1),$=p("新增属性"),j=p(null),w=p([]),O=p(!1),M=p(!1),k=p([]),G=p(null),I=p(!1),K=p("新增属性值"),W=p(null),ie=q({valueCode:[],valueName:[{required:!0,message:"属性值名称不能为空",trigger:"blur"}],isDefault:[{required:!0,message:"请选择是否默认",trigger:"change"}],imgUrl:[{type:"string",message:"图片URL必须是字符串",trigger:"blur"}]}),me=p([]),u=q({id:null,attributeId:null,valueCode:"",valueName:"",imgUrl:"",isDefault:"0"}),n=q({id:null,bomId:y.bomId,bomStructureId:y.bomStructureId,attributeCode:"",attributeName:"",componentType:"input",stepValue:"",minValue:"",maxValue:"",showTooltip:"0",isRequired:"0",defaultValue:""}),N=async()=>{z.value=!0;try{const t=await je({bomId:y.bomId,bomStructureId:y.bomStructureId});w.value=t.rows||[],console.log("response.data:",t.rows),console.log("attributeList:",w.value),z.value=!1}catch(t){console.error("加载属性列表失败:",t),m.error("加载属性列表失败"),z.value=!1}};Ye(()=>y.bomStructureId,t=>{console.log("bomStructureId:",t),t!=null&&t!==""&&(n.bomStructureId=t,console.log("bomStructureId:",t),N())},{immediate:!0}),et(()=>{N()});const ce=q({attributeName:[{required:!0,message:"属性名称不能为空",trigger:"blur"}],componentType:[{required:!0,message:"请选择组件类型",trigger:"change"}],isRequired:[{required:!0,message:"请选择是否必填",trigger:"change"}]}),pe=t=>{const e=X.value.find(s=>s.value===t);return e?e.label:t},ve=t=>({input:"primary",select:"info",radio:"success",checkbox:"warning",date:"danger",datetime:"purple",number:"blue",slider:"green",switch:"orange",textarea:"cyan"})[t]||"default",ge=t=>{S.value=t},ye=()=>{Pe(),$.value="新增属性",C.value=!0},fe=t=>{const e={...t,attributeCode:t.attributeCode,attributeName:t.attributeName,isRequired:t.required!==void 0?t.required?"1":"0":t.isRequired||"0"};Object.assign(n,e),n.bomStructureId=y.bomStructureId,$.value="编辑属性",C.value=!0},be=async t=>{var e;try{await J.confirm(`确定要删除属性 "${t.attributeName}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),console.log("开始删除属性:",t),console.log("要删除的属性ID:",t.id),console.log("调用deleteSuperBomStructureAttribute API，属性ID:",t.id);const s=await oe(t.id);console.log("API调用成功，返回结果:",s),w.value=w.value.filter(i=>i.id!==t.id),m.success("属性删除成功")}catch(s){s!=="cancel"&&(m.error("删除失败"),console.error("删除属性失败:",s),console.error("错误详情:",((e=s.response)==null?void 0:e.data)||s.message),console.error("错误堆栈:",s.stack))}},we=async()=>{var t;if(S.value.length!==0)try{await J.confirm(`确定要删除选中的 ${S.value.length} 个属性吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=S.value.map(i=>i.id);console.log("开始批量删除属性，选中数量:",S.value.length),console.log("要删除的属性ID列表:",e),console.log("调用deleteSuperBomStructureAttribute API进行批量删除");const s=await oe(e.join(","));console.log("API调用成功，返回结果:",s),w.value=w.value.filter(i=>!e.includes(i.id)),S.value=[],m.success("批量删除成功")}catch(e){e!=="cancel"&&(m.error("批量删除失败"),console.error("批量删除属性失败:",e),console.error("错误详情:",((t=e.response)==null?void 0:t.data)||e.message),console.error("错误堆栈:",e.stack))}},he=async()=>{try{await j.value.validate();let t=n.bomStructureId;if((t==null||t==="")&&(t=y.bomStructureId),t==null||t===""){m.error("请先选择节点");return}n.bomStructureId=t;const e={...n,id:n.id,isRequired:n.isRequired,description:void 0,attrCode:void 0,attrName:void 0};if(n.id)try{const s=w.value.findIndex(V=>V.id===n.id);s!==-1&&(w.value[s]={...e});const i=w.value.map(V=>({bomStructureId:V.bomStructureId||y.bomStructureId,attributeId:V.attributeId,sortOrder:V.sortOrder||100}));await Oe(n.bomStructureId,i),await N(),m.success("属性更新成功"),C.value=!1}catch(s){console.error("更新属性失败:",s),m.error("更新属性失败")}else try{await Ge(e),await N(),m.success("属性新增成功"),C.value=!1}catch(s){console.error("新增属性失败:",s),m.error("新增属性失败")}}catch(t){t!==!1&&(m.error("操作失败，请检查表单数据"),console.error("提交属性表单失败:",t))}},Pe=()=>{var e;const t=n.bomStructureId||y.bomStructureId;(e=j.value)==null||e.resetFields(),n.id=null,n.attributeCode="",n.attributeName="",n.componentType="input",n.stepValue="",n.minValue="",n.maxValue="",n.showTooltip="0",n.isRequired="0",n.defaultValue="",n.bomStructureId=t},Ve=t=>{G.value=t,O.value=!0,_e(t.id)},_e=async t=>{M.value=!0;try{const e=await Ze(y.bomStructureId,t);k.value=e.data||[],M.value=!1}catch(e){console.error("加载属性值列表失败:",e),m.error("加载属性值列表失败"),M.value=!1}},xe=()=>{var t,e;u.id=null,u.attributeId=(t=G.value)==null?void 0:t.id,u.valueCode="",u.valueName="",u.imgUrl="",u.isDefault="0",(e=W.value)==null||e.resetFields()},Se=()=>{xe(),K.value="新增属性值",I.value=!0},Ce=t=>{Object.assign(u,{...t}),K.value="编辑属性值",I.value=!0},ke=async t=>{try{await J.confirm(`确定要删除属性值 "${t.valueName}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await Ke(t.id),k.value=k.value.filter(e=>e.id!==t.id),m.success("属性值删除成功")}catch(e){e!=="cancel"&&(m.error("删除失败"),console.error("删除属性值失败:",e))}},Ie=t=>{me.value=t},Ae=()=>{m.info("图片上传功能开发中，当前使用模拟URL"),u.imgUrl=`https://example.com/image-${Date.now()}.jpg`},D=p(!1),x=p("elementPlus"),A=p(""),Ue=[{label:"Element Plus 图标",value:"elementPlus"},{label:"Material 图标",value:"material"},{label:"Font Awesome",value:"fontAwesome"},{label:"自定义 SVG 图标",value:"customSvg"}],Y=[{name:"Add",code:"Plus",type:"elementPlus"},{name:"编辑",code:"Edit",type:"elementPlus"},{name:"删除",code:"Delete",type:"elementPlus"},{name:"设置",code:"Setting",type:"elementPlus"},{name:"搜索",code:"Search",type:"elementPlus"},{name:"刷新",code:"Refresh",type:"elementPlus"},{name:"保存",code:"Check",type:"elementPlus"},{name:"取消",code:"Close",type:"elementPlus"},{name:"警告",code:"Warning",type:"elementPlus"},{name:"错误",code:"CircleClose",type:"elementPlus"},{name:"成功",code:"CircleCheck",type:"elementPlus"},{name:"信息",code:"CircleInfo",type:"elementPlus"},{name:"上移",code:"Top",type:"elementPlus"},{name:"下移",code:"Bottom",type:"elementPlus"},{name:"左移",code:"Left",type:"elementPlus"},{name:"右移",code:"Right",type:"elementPlus"},{name:"展开",code:"Expand",type:"elementPlus"},{name:"折叠",code:"Fold",type:"elementPlus"},{name:"菜单",code:"Menu",type:"elementPlus"},{name:"首页",code:"House",type:"elementPlus"},{name:"用户",code:"User",type:"elementPlus"},{name:"角色",code:"UserFilled",type:"elementPlus"},{name:"部门",code:"OfficeBuilding",type:"elementPlus"},{name:"权限",code:"Key",type:"elementPlus"},{name:"日志",code:"Document",type:"elementPlus"},{name:"统计",code:"DataAnalysis",type:"elementPlus"},{name:"导出",code:"Download",type:"elementPlus"},{name:"导入",code:"Upload",type:"elementPlus"},{name:"打印",code:"Printer",type:"elementPlus"},{name:"复制",code:"CopyDocument",type:"elementPlus"},{name:"剪切",code:"Scissor",type:"elementPlus"},{name:"粘贴",code:"PaperClip",type:"elementPlus"},{name:"附件",code:"Files",type:"elementPlus"},{name:"链接",code:"Link",type:"elementPlus"},{name:"图片",code:"Picture",type:"elementPlus"},{name:"视频",code:"VideoPlay",type:"elementPlus"},{name:"音乐",code:"Headset",type:"elementPlus"},{name:"文件",code:"Document",type:"elementPlus"},{name:"文件夹",code:"Folder",type:"elementPlus"},{name:"新建文件夹",code:"FolderAdd",type:"elementPlus"},{name:"删除文件夹",code:"FolderDelete",type:"elementPlus"},{name:"共享",code:"Share",type:"elementPlus"},{name:"锁定",code:"Lock",type:"elementPlus"},{name:"解锁",code:"Unlock",type:"elementPlus"},{name:"密码",code:"Key",type:"elementPlus"},{name:"眼睛",code:"View",type:"elementPlus"},{name:"隐藏",code:"Hide",type:"elementPlus"},{name:"筛选",code:"Filter",type:"elementPlus"},{name:"排序",code:"Rank",type:"elementPlus"},{name:"时间",code:"Clock",type:"elementPlus"},{name:"日历",code:"Calendar",type:"elementPlus"},{name:"地图",code:"Location",type:"elementPlus"},{name:"定位",code:"Position",type:"elementPlus"},{name:"手机",code:"Cellphone",type:"elementPlus"},{name:"电话",code:"Phone",type:"elementPlus"},{name:"邮件",code:"Message",type:"elementPlus"},{name:"微信",code:"Wechat",type:"elementPlus"},{name:"支付",code:"CircleCheckFilled",type:"elementPlus"},{name:"购物车",code:"ShoppingCart",type:"elementPlus"},{name:"商品",code:"Box",type:"elementPlus"},{name:"订单",code:"Ticket",type:"elementPlus"},{name:"库存",code:"DataBoard",type:"elementPlus"},{name:"利润",code:"TrendCharts",type:"elementPlus"},{name:"销售",code:"Coin",type:"elementPlus"},{name:"采购",code:"ShoppingBag",type:"elementPlus"},{name:"报表",code:"DataLine",type:"elementPlus"},{name:"图表",code:"DataBar",type:"elementPlus"},{name:"饼图",code:"DataPie",type:"elementPlus"},{name:"仪表盘",code:"DataDashboard",type:"elementPlus"},{name:"设置",code:"Setting",type:"elementPlus"},{name:"主题",code:"Palette",type:"elementPlus"},{name:"语言",code:"Translate",type:"elementPlus"},{name:"帮助",code:"QuestionFilled",type:"elementPlus"},{name:"关于",code:"InfoFilled",type:"elementPlus"},{name:"退出",code:"SwitchButton",type:"elementPlus"},{name:"登录",code:"Avatar",type:"elementPlus"},{name:"注册",code:"UserFilled",type:"elementPlus"},{name:"验证码",code:"View",type:"elementPlus"},{name:"滑块",code:"Slider",type:"elementPlus"},{name:"开关",code:"Switch",type:"elementPlus"},{name:"单选",code:"Radio",type:"elementPlus"},{name:"多选",code:"Checkbox",type:"elementPlus"},{name:"下拉",code:"ArrowDown",type:"elementPlus"},{name:"上拉",code:"ArrowUp",type:"elementPlus"},{name:"左拉",code:"ArrowLeft",type:"elementPlus"},{name:"右拉",code:"ArrowRight",type:"elementPlus"},{name:"下拉菜单",code:"More",type:"elementPlus"},{name:"全屏",code:"FullScreen",type:"elementPlus"},{name:"退出全屏",code:"FullScreenExit",type:"elementPlus"},{name:"缩放",code:"ZoomIn",type:"elementPlus"},{name:"缩小",code:"ZoomOut",type:"elementPlus"},{name:"旋转",code:"RefreshRight",type:"elementPlus"},{name:"加载",code:"Loading",type:"elementPlus"},{name:"成功",code:"SuccessFilled",type:"elementPlus"},{name:"错误",code:"ErrorFilled",type:"elementPlus"},{name:"警告",code:"WarningFilled",type:"elementPlus"},{name:"信息",code:"InfoFilled",type:"elementPlus"}],De=[{name:"Home",code:"home",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>'},{name:"Search",code:"search",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>'},{name:"Menu",code:"menu",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>'},{name:"Add",code:"add",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>'},{name:"Delete",code:"delete",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>'},{name:"Edit",code:"edit",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>'},{name:"Save",code:"save",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></svg>'},{name:"Settings",code:"settings",type:"material",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>'}],Be=[{name:"Check",code:"check",type:"fontAwesome",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M437.36 174.75L233.6 378.51c-12.39 12.37-32.57 12.37-44.94 0L74.63 274.9c-12.39-12.37-12.39-32.57 0-44.94l19.66-19.66c12.39-12.37 32.57-12.37 44.94 0L240 303.54l132.75-132.74c12.39-12.37 32.57-12.37 44.94 0l19.66 19.66c12.39 12.37 12.39 32.57 0 44.94z"/></svg>'},{name:"Times",code:"times",type:"fontAwesome",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M289.94 256l95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"/></svg>'},{name:"Star",code:"star",type:"fontAwesome",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"/></svg>'},{name:"Heart",code:"heart",type:"fontAwesome",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>'},{name:"User",code:"user",type:"fontAwesome",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"/></svg>'}],Le=[{name:"Custom Icon 1",code:"custom1",type:"customSvg",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#409eff"/><path d="M12 8l4 4-4 4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'},{name:"Custom Icon 2",code:"custom2",type:"customSvg",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" fill="#67c23a"/><path d="M9 12h6m-3-3v6" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>'},{name:"Custom Icon 3",code:"custom3",type:"customSvg",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5z" fill="#e6a23c"/><path d="M2 17l10 5 10-5" fill="none" stroke="#e6a23c" stroke-width="2"/><path d="M2 12l10 5 10-5" fill="none" stroke="#e6a23c" stroke-width="2"/></svg>'}],B=[...Y,...De,...Be,...Le],L=p(B.filter(t=>t.type===x.value)),Te=()=>{A.value="",L.value=B.filter(t=>t.type===x.value)},ze=()=>{if(!A.value){L.value=B.filter(e=>e.type===x.value);return}const t=A.value.toLowerCase();L.value=B.filter(e=>e.type===x.value&&e.name.toLowerCase().includes(t))},Me=()=>{x.value="elementPlus",A.value="",L.value=B.filter(t=>t.type===x.value),D.value=!0},Ne=t=>{t.type==="elementPlus"?u.imgUrl=t.code:u.imgUrl=t.svg,D.value=!1,m.success("图标选择成功")},Fe=async()=>{try{await W.value.validate();const t={...u,bomStructureId:y.bomStructureId,attributeValue:u.valueCode||null};if(u.id)try{await We(t);const e=k.value.findIndex(s=>s.id===u.id);e!==-1&&(k.value[e]={...u}),m.success("属性值更新成功")}catch(e){console.error("更新属性值失败:",e),m.error("更新属性值失败")}else try{const e=await Qe(t),s={...u,id:e.id||Date.now()};k.value.push(s),m.success("属性值新增成功")}catch(e){console.error("新增属性值失败:",e),m.error("新增属性值失败")}I.value=!1}catch(t){t!==!1&&(m.error("操作失败，请检查表单数据"),console.error("提交属性值表单失败:",t))}};return(t,e)=>{const s=g("el-button"),i=g("el-table-column"),V=g("el-tag"),ee=g("el-table"),h=g("el-input"),f=g("el-form-item"),U=g("el-option"),F=g("el-select"),Re=g("el-radio"),qe=g("el-radio-group"),te=g("el-form"),Q=g("el-dialog"),Z=g("el-icon"),Ee=g("el-image"),He=g("Search"),$e=g("el-drawer"),le=tt("loading");return d(),P("div",lt,[v("div",ot,[e[24]||(e[24]=v("h3",null,"属性信息管理",-1)),v("div",at,[l(s,{type:"primary",icon:"Plus",onClick:ye},{default:o(()=>e[22]||(e[22]=[c("新增属性")])),_:1,__:[22]}),l(s,{type:"danger",icon:"Delete",onClick:we,disabled:S.value.length===0},{default:o(()=>e[23]||(e[23]=[c("批量删除")])),_:1,__:[23]},8,["disabled"])])]),ae((d(),b(ee,{data:w.value,stripe:"",style:{width:"100%"}},{default:o(()=>[l(i,{type:"selection",width:"55",align:"center",onSelectionChange:ge}),l(i,{label:"属性编码",align:"center",prop:"attributeCode","min-width":"150"}),l(i,{label:"属性名称",align:"center",prop:"attributeName","min-width":"150"}),l(i,{label:"组件类型",align:"center",prop:"componentType",width:"120"},{default:o(r=>[l(V,{type:ve(r.row.componentType)},{default:o(()=>[c(_(pe(r.row.componentType)),1)]),_:2},1032,["type"])]),_:1}),l(i,{label:"是否必填",align:"center",prop:"isRequired",width:"100"},{default:o(r=>[l(V,{type:r.row.isRequired==="1"?"success":"info"},{default:o(()=>[c(_(r.row.isRequired==="1"?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(i,{label:"默认值",align:"center",prop:"defaultValue","min-width":"150","show-overflow-tooltip":""}),l(i,{label:"操作",align:"center",width:"200",fixed:"right"},{default:o(r=>[l(s,{size:"small",type:"primary",icon:"Edit",onClick:a=>fe(r.row)},{default:o(()=>e[25]||(e[25]=[c(" 编辑 ")])),_:2,__:[25]},1032,["onClick"]),l(s,{size:"small",type:"info",icon:"Setting",onClick:a=>Ve(r.row)},{default:o(()=>e[26]||(e[26]=[c(" 属性值 ")])),_:2,__:[26]},1032,["onClick"]),l(s,{size:"small",type:"danger",icon:"Delete",onClick:a=>be(r.row)},{default:o(()=>e[27]||(e[27]=[c(" 删除 ")])),_:2,__:[27]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[le,z.value]]),l(Q,{title:$.value,modelValue:C.value,"onUpdate:modelValue":e[10]||(e[10]=r=>C.value=r),width:"600px","append-to-body":""},{footer:o(()=>[v("span",ut,[l(s,{onClick:e[9]||(e[9]=r=>C.value=!1)},{default:o(()=>e[29]||(e[29]=[c("取消")])),_:1,__:[29]}),l(s,{type:"primary",onClick:he},{default:o(()=>e[30]||(e[30]=[c("确定")])),_:1,__:[30]})])]),default:o(()=>[l(te,{ref_key:"attributeFormRef",ref:j,model:n,rules:ce,"label-width":"120px"},{default:o(()=>[v("div",nt,[e[28]||(e[28]=c(" 当前节点：")),v("span",rt,_(y.nodeName||"未选择节点"),1),v("span",st,"节点ID："+_(y.bomStructureId||"未选择节点"),1)]),l(f,{label:"属性编码",prop:"attributeCode"},{default:o(()=>[l(h,{modelValue:n.attributeCode,"onUpdate:modelValue":e[0]||(e[0]=r=>n.attributeCode=r),placeholder:"自动生成",disabled:""},null,8,["modelValue"])]),_:1}),l(f,{label:"属性名称",prop:"attributeName"},{default:o(()=>[l(h,{modelValue:n.attributeName,"onUpdate:modelValue":e[1]||(e[1]=r=>n.attributeName=r),placeholder:"请输入属性名称"},null,8,["modelValue"])]),_:1}),l(f,{label:"组件类型",prop:"componentType"},{default:o(()=>[l(F,{modelValue:n.componentType,"onUpdate:modelValue":e[2]||(e[2]=r=>n.componentType=r),placeholder:"请选择组件类型"},{default:o(()=>[(d(!0),P(E,null,H(ne(X),r=>(d(),b(U,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n.componentType==="slider"||n.componentType==="number"?(d(),b(f,{key:0,label:"最小值",prop:"minValue"},{default:o(()=>[l(h,{modelValue:n.minValue,"onUpdate:modelValue":e[3]||(e[3]=r=>n.minValue=r),placeholder:"请输入最小值"},null,8,["modelValue"])]),_:1})):T("",!0),n.componentType==="slider"||n.componentType==="number"?(d(),b(f,{key:1,label:"最大值",prop:"maxValue"},{default:o(()=>[l(h,{modelValue:n.maxValue,"onUpdate:modelValue":e[4]||(e[4]=r=>n.maxValue=r),placeholder:"请输入最大值"},null,8,["modelValue"])]),_:1})):T("",!0),n.componentType==="slider"?(d(),b(f,{key:2,label:"步进值",prop:"stepValue"},{default:o(()=>[l(h,{modelValue:n.stepValue,"onUpdate:modelValue":e[5]||(e[5]=r=>n.stepValue=r),placeholder:"请输入步进值"},null,8,["modelValue"])]),_:1})):T("",!0),l(f,{label:"是否展示提示",prop:"showTooltip"},{default:o(()=>[l(qe,{modelValue:n.showTooltip,"onUpdate:modelValue":e[6]||(e[6]=r=>n.showTooltip=r)},{default:o(()=>[(d(!0),P(E,null,H(ne(de),r=>(d(),b(Re,{key:r.value,label:r.value},{default:o(()=>[c(_(r.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"是否必填",prop:"isRequired"},{default:o(()=>[l(F,{modelValue:n.isRequired,"onUpdate:modelValue":e[7]||(e[7]=r=>n.isRequired=r),placeholder:"请选择"},{default:o(()=>[l(U,{label:"是",value:"1"}),l(U,{label:"否",value:"0"})]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"默认值",prop:"defaultValue"},{default:o(()=>[l(h,{modelValue:n.defaultValue,"onUpdate:modelValue":e[8]||(e[8]=r=>n.defaultValue=r),placeholder:"请输入默认值"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),l($e,{modelValue:O.value,"onUpdate:modelValue":e[21]||(e[21]=r=>O.value=r),title:"属性值管理",direction:"rtl",size:"50%","append-to-body":""},{default:o(()=>{var r;return[v("div",dt,[v("div",it,[v("h4",null,_((r=G.value)==null?void 0:r.attributeName)+" - 属性值列表",1),l(s,{type:"primary",icon:"Plus",onClick:Se},{default:o(()=>e[31]||(e[31]=[c("新增属性值")])),_:1,__:[31]})]),ae((d(),b(ee,{data:k.value,stripe:"",style:{width:"100%"}},{default:o(()=>[l(i,{type:"selection",width:"55",align:"center",onSelectionChange:Ie}),l(i,{label:"属性值编码",align:"center",prop:"valueCode","min-width":"150"}),l(i,{label:"属性值名称",align:"center",prop:"valueName","min-width":"150"}),l(i,{label:"是否默认",align:"center",prop:"isDefault",width:"100"},{default:o(a=>[l(V,{type:a.row.isDefault==="1"?"success":"info"},{default:o(()=>[c(_(a.row.isDefault==="1"?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(i,{label:"图标",align:"center",prop:"imgUrl","min-width":"150"},{default:o(a=>[a.row.imgUrl?(d(),P("div",mt,[a.row.imgUrl&&typeof a.row.imgUrl=="string"&&Y.some(R=>R.code===a.row.imgUrl)?(d(),b(Z,{key:0,style:{"font-size":"24px","margin-right":"8px",color:"#409eff"}},{default:o(()=>[(d(),b(re(a.row.imgUrl)))]),_:2},1024)):a.row.imgUrl?(d(),b(Ee,{key:1,src:a.row.imgUrl,"preview-src-list":[a.row.imgUrl],style:{width:"30px",height:"30px","margin-right":"8px",cursor:"pointer"},fit:"cover"},null,8,["src","preview-src-list"])):T("",!0),a.row.imgUrl?(d(),P("span",ct,_(a.row.imgUrl),1)):T("",!0)])):(d(),P("span",pt,"无"))]),_:1}),l(i,{label:"操作",align:"center",width:"150",fixed:"right"},{default:o(a=>[l(s,{size:"small",type:"primary",icon:"Edit",onClick:R=>Ce(a.row)},{default:o(()=>e[32]||(e[32]=[c(" 编辑 ")])),_:2,__:[32]},1032,["onClick"]),l(s,{size:"small",type:"danger",icon:"Delete",onClick:R=>ke(a.row)},{default:o(()=>e[33]||(e[33]=[c(" 删除 ")])),_:2,__:[33]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[le,M.value]]),l(Q,{title:K.value,modelValue:I.value,"onUpdate:modelValue":e[16]||(e[16]=a=>I.value=a),width:"500px","append-to-body":""},{footer:o(()=>[v("span",gt,[l(s,{onClick:e[15]||(e[15]=a=>I.value=!1)},{default:o(()=>e[37]||(e[37]=[c("取消")])),_:1,__:[37]}),l(s,{type:"primary",onClick:Fe},{default:o(()=>e[38]||(e[38]=[c("确定")])),_:1,__:[38]})])]),default:o(()=>[l(te,{ref_key:"attributeValueFormRef",ref:W,model:u,rules:ie,"label-width":"100px"},{default:o(()=>[l(f,{label:"属性值编码",prop:"valueCode"},{default:o(()=>[l(h,{modelValue:u.valueCode,"onUpdate:modelValue":e[11]||(e[11]=a=>u.valueCode=a),placeholder:"自动生成",disabled:""},null,8,["modelValue"])]),_:1}),l(f,{label:"属性值名称",prop:"valueName"},{default:o(()=>[l(h,{modelValue:u.valueName,"onUpdate:modelValue":e[12]||(e[12]=a=>u.valueName=a),placeholder:"请输入属性值名称"},null,8,["modelValue"])]),_:1}),l(f,{label:"是否默认",prop:"isDefault"},{default:o(()=>[l(F,{modelValue:u.isDefault,"onUpdate:modelValue":e[13]||(e[13]=a=>u.isDefault=a),placeholder:"请选择"},{default:o(()=>[l(U,{label:"是",value:"1"}),l(U,{label:"否",value:"0"})]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"图标/图片URL",prop:"imgUrl"},{default:o(()=>[l(h,{modelValue:u.imgUrl,"onUpdate:modelValue":e[14]||(e[14]=a=>u.imgUrl=a),placeholder:"请输入图片URL或选择Element Plus图标"},null,8,["modelValue"]),v("div",vt,[l(s,{type:"primary",size:"small",onClick:Ae},{default:o(()=>e[34]||(e[34]=[c("上传图片")])),_:1,__:[34]}),l(s,{type:"success",size:"small",onClick:Me},{default:o(()=>e[35]||(e[35]=[c("Element Plus图标库")])),_:1,__:[35]}),e[36]||(e[36]=v("span",{style:{"margin-left":"10px",color:"#909399","font-size":"12px"}}," 支持JPG、PNG格式图片或Element Plus图标 ",-1))])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),l(Q,{title:"图标库",modelValue:D.value,"onUpdate:modelValue":e[20]||(e[20]=a=>D.value=a),width:"900px","append-to-body":""},{footer:o(()=>[v("span",Pt,[l(s,{onClick:e[19]||(e[19]=a=>D.value=!1)},{default:o(()=>e[39]||(e[39]=[c("关闭")])),_:1,__:[39]})])]),default:o(()=>[v("div",yt,[l(F,{modelValue:x.value,"onUpdate:modelValue":e[17]||(e[17]=a=>x.value=a),placeholder:"选择图标库",size:"small",onChange:Te,style:{"margin-right":"10px"}},{default:o(()=>[(d(),P(E,null,H(Ue,a=>l(U,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l(h,{modelValue:A.value,"onUpdate:modelValue":e[18]||(e[18]=a=>A.value=a),placeholder:"搜索图标",size:"small",onInput:ze,clearable:"",style:{width:"200px"}},{prefix:o(()=>[l(Z,null,{default:o(()=>[l(He)]),_:1})]),_:1},8,["modelValue"])]),v("div",ft,[(d(!0),P(E,null,H(L.value,a=>(d(),P("div",{key:a.code+a.type,class:"icon-item",onClick:R=>Ne(a)},[a.type==="elementPlus"?(d(),b(Z,{key:0,style:{"font-size":"32px","margin-bottom":"8px",cursor:"pointer",color:"#409eff"}},{default:o(()=>[(d(),b(re(a.code)))]),_:2},1024)):(d(),P("div",{key:1,class:"svg-icon-preview",style:{"font-size":"32px","margin-bottom":"8px",cursor:"pointer",color:"#409eff"},innerHTML:a.svg},null,8,wt)),v("div",ht,_(a.name),1)],8,bt))),128))])]),_:1},8,["modelValue"])])]}),_:1},8,["modelValue"])])}}},St=Je(Vt,[["__scopeId","data-v-c4a4dc28"]]);export{St as default};
