import{_ as F,C as L,r as x,w as O,o as P,h as d,d as $,e as q,j as s,i as e,k as l,q as m,n as H,ad as K,t as B,V as b,E as R}from"./index-CwdKQqOf.js";const W={class:"bom-node-other-info"},A={class:"other-info-content"},G={class:"card-actions"},J={class:"card-header"},Q={__name:"BomNodeOtherInfo",props:{bomId:{type:[String,Number],required:!0},bomStructureId:{type:[String,Number],default:null}},setup(I){const f=I,a=L({bomId:f.bomId,bomStructureId:f.bomStructureId,createTime:"2024-01-01 12:00:00",updateTime:"2024-01-02 14:30:00",createBy:"admin",updateBy:"admin",version:"1.0.0",approveStatus:"approved",remark:""}),T=x([{id:1,operator:"admin",operation:"新增",content:"创建节点",createTime:"2024-01-01 12:00:00"},{id:2,operator:"admin",operation:"编辑",content:"更新节点名称",createTime:"2024-01-02 14:30:00"},{id:3,operator:"user1",operation:"状态变更",content:"启用节点",createTime:"2024-01-03 09:15:00"}]),c=x([{name:"节点设计文档.pdf",url:"#",size:1024*1024*2,type:"pdf",status:"success",uploadTime:"2024-01-01 12:05:00"},{name:"节点图片.jpg",url:"#",size:1024*512,type:"jpg",status:"success",uploadTime:"2024-01-02 14:35:00"}]),S=()=>{console.log("加载历史记录，节点ID:",f.bomStructureId)};O(()=>f.bomStructureId,n=>{a.bomStructureId=n,S()});const k=()=>{b.success("其他信息保存成功")},C=()=>{b.info("上传功能开发中")},h=n=>{b.info("预览功能开发中")},V=n=>{R.confirm(`确定要删除文件 "${n.name}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=c.value.findIndex(u=>u.name===n.name);t!==-1&&c.value.splice(t,1),b.success("文件删除成功")}).catch(()=>{})},U=n=>n<1024?n+" B":n<1024*1024?(n/1024).toFixed(2)+" KB":(n/(1024*1024)).toFixed(2)+" MB";return P(()=>{}),(n,t)=>{const u=d("el-input"),p=d("el-form-item"),i=d("el-col"),v=d("el-row"),w=d("el-option"),N=d("el-select"),j=d("el-form"),_=d("el-button"),y=d("el-card"),r=d("el-table-column"),g=d("el-table"),E=d("el-icon"),M=d("el-upload"),z=d("el-tag");return q(),$("div",W,[t[16]||(t[16]=s("div",{class:"other-info-header"},[s("h4",null,"其他信息管理")],-1)),s("div",A,[e(y,{class:"info-card",shadow:"hover"},{header:l(()=>t[8]||(t[8]=[s("div",{class:"card-header"},[s("h5",null,"节点扩展信息")],-1)])),default:l(()=>[e(j,{model:a,"label-width":"120px"},{default:l(()=>[e(v,{gutter:20},{default:l(()=>[e(i,{span:12},{default:l(()=>[e(p,{label:"创建时间"},{default:l(()=>[e(u,{modelValue:a.createTime,"onUpdate:modelValue":t[0]||(t[0]=o=>a.createTime=o),disabled:"",placeholder:"创建时间"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(p,{label:"更新时间"},{default:l(()=>[e(u,{modelValue:a.updateTime,"onUpdate:modelValue":t[1]||(t[1]=o=>a.updateTime=o),disabled:"",placeholder:"更新时间"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:20},{default:l(()=>[e(i,{span:12},{default:l(()=>[e(p,{label:"创建人"},{default:l(()=>[e(u,{modelValue:a.createBy,"onUpdate:modelValue":t[2]||(t[2]=o=>a.createBy=o),disabled:"",placeholder:"创建人"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(p,{label:"更新人"},{default:l(()=>[e(u,{modelValue:a.updateBy,"onUpdate:modelValue":t[3]||(t[3]=o=>a.updateBy=o),disabled:"",placeholder:"更新人"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:20},{default:l(()=>[e(i,{span:12},{default:l(()=>[e(p,{label:"版本号"},{default:l(()=>[e(u,{modelValue:a.version,"onUpdate:modelValue":t[4]||(t[4]=o=>a.version=o),placeholder:"版本号"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(p,{label:"审批状态"},{default:l(()=>[e(N,{modelValue:a.approveStatus,"onUpdate:modelValue":t[5]||(t[5]=o=>a.approveStatus=o),placeholder:"请选择审批状态"},{default:l(()=>[e(w,{label:"待审批",value:"pending"}),e(w,{label:"已通过",value:"approved"}),e(w,{label:"已拒绝",value:"rejected"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{label:"备注"},{default:l(()=>[e(u,{modelValue:a.remark,"onUpdate:modelValue":t[6]||(t[6]=o=>a.remark=o),type:"textarea",placeholder:"请输入备注信息",rows:4},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),s("div",G,[e(_,{type:"primary",onClick:k},{default:l(()=>t[9]||(t[9]=[m("保存")])),_:1,__:[9]})])]),_:1}),e(y,{class:"info-card",shadow:"hover",style:{"margin-top":"20px"}},{header:l(()=>t[10]||(t[10]=[s("div",{class:"card-header"},[s("h5",null,"操作历史记录")],-1)])),default:l(()=>[e(g,{data:T.value,border:"",style:{width:"100%"},stripe:""},{default:l(()=>[e(r,{prop:"id",label:"记录ID",width:"120"}),e(r,{prop:"operator",label:"操作人",width:"180"}),e(r,{prop:"operation",label:"操作类型",width:"180"}),e(r,{prop:"content",label:"操作内容"}),e(r,{prop:"createTime",label:"操作时间",width:"220"})]),_:1},8,["data"])]),_:1}),e(y,{class:"info-card",shadow:"hover",style:{"margin-top":"20px"}},{header:l(()=>[s("div",J,[t[12]||(t[12]=s("h5",null,"附件信息",-1)),e(_,{type:"primary",size:"small",icon:"Plus",onClick:C},{default:l(()=>t[11]||(t[11]=[m("上传附件")])),_:1,__:[11]})])]),default:l(()=>[e(M,{"file-list":c.value,"onUpdate:fileList":t[7]||(t[7]=o=>c.value=o),"auto-upload":!1,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png","on-preview":h,"on-remove":V,"list-type":"picture-card",style:{"margin-bottom":"20px"}},{tip:l(()=>t[13]||(t[13]=[s("div",{class:"el-upload__tip"}," 支持上传 PDF、Word、Excel、图片格式文件，单个文件不超过 5MB ",-1)])),default:l(()=>[e(E,null,{default:l(()=>[e(H(K))]),_:1})]),_:1},8,["file-list"]),e(g,{data:c.value,border:"",style:{width:"100%"}},{default:l(()=>[e(r,{prop:"name",label:"文件名",width:"250"}),e(r,{prop:"size",label:"文件大小",width:"120"},{default:l(o=>[m(B(U(o.row.size)),1)]),_:1}),e(r,{prop:"type",label:"文件类型",width:"120"}),e(r,{prop:"status",label:"上传状态",width:"120"},{default:l(o=>[e(z,{type:o.row.status==="success"?"success":"warning"},{default:l(()=>[m(B(o.row.status==="success"?"已上传":"待上传"),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"uploadTime",label:"上传时间",width:"220"}),e(r,{label:"操作",width:"150",fixed:"right"},{default:l(o=>[e(_,{type:"primary",size:"small",onClick:D=>h(o.row)},{default:l(()=>t[14]||(t[14]=[m("预览")])),_:2,__:[14]},1032,["onClick"]),e(_,{type:"danger",size:"small",onClick:D=>V(o.row)},{default:l(()=>t[15]||(t[15]=[m("删除")])),_:2,__:[15]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])])}}},Y=F(Q,[["__scopeId","data-v-67b616c2"]]);export{Y as default};
