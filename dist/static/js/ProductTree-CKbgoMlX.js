import{_ as L,r as d,z as q,w as D,h as s,d as M,e as a,j as n,i as r,n as b,ah as P,k as l,M as R,l as c,Y as $,t as j,m as i,q as E,aC as K,aw as U,ax as Y,au as g}from"./index-CwdKQqOf.js";import{u as A}from"./configurator-DAu3_4Je.js";import"./bom-DdrUuB8x.js";import"./superBomRuleRelation-Cz_bCmLL.js";import"./rule-nChVW3Ks.js";import"./superBomVariable-gMrvMuGl.js";const F={class:"product-tree"},G={class:"tree-header"},H={class:"tree-node"},J=["title"],O={class:"node-badges"},Q={__name:"ProductTree",props:{bomId:{type:[Number,String],required:!0}},emits:["node-select"],setup(W,{emit:y}){const C=y,k=A(),u=d(),p=d(""),_=d([]),m=q(()=>k.bomTreeData),v={children:"children",label:"nodeName"},N=e=>({0:g,1:Y,2:U})[e.nodeType]||g,x=e=>["node-icon",`node-type-${e.nodeType}`,`status-${e.status}`,{disabled:e.isDisabled,hidden:!e.isVisible}],V=e=>{e.status!=="disabled"&&e.isVisible&&C("node-select",e)},I=e=>{u.value.filter(e)},S=(e,t)=>e?t.nodeName.toLowerCase().includes(e.toLowerCase())||t.nodeCode.toLowerCase().includes(e.toLowerCase()):!0;return D(()=>m.value,e=>{e&&e.length>0&&(_.value=[e[0].bomStructureId])},{immediate:!0}),(e,t)=>{const T=s("el-input"),f=s("el-icon"),w=s("el-tag"),z=s("el-badge"),B=s("el-tree");return a(),M("div",F,[n("div",G,[r(T,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=h=>p.value=h),placeholder:"搜索节点...","prefix-icon":b(P),clearable:"",onInput:I},null,8,["modelValue","prefix-icon"])]),r(B,{ref_key:"treeRef",ref:u,data:m.value,props:v,"node-key":"bomStructureId","default-expanded-keys":_.value,"highlight-current":!0,"filter-node-method":S,onNodeClick:V},{default:l(({node:h,data:o})=>[n("div",H,[r(f,{class:R(x(o))},{default:l(()=>[(a(),c($(N(o))))]),_:2},1032,["class"]),n("span",{class:"node-label",title:o.nodeName},j(o.nodeName),9,J),n("div",O,[o.isRequired?(a(),c(w,{key:0,size:"small",type:"danger",effect:"plain"},{default:l(()=>t[1]||(t[1]=[E(" 必选 ")])),_:1,__:[1]})):i("",!0),o.status==="error"?(a(),c(z,{key:1,value:"!",type:"danger"})):i("",!0),o.status==="configured"?(a(),c(f,{key:2,class:"status-icon success",size:16},{default:l(()=>[r(b(K))]),_:1})):i("",!0)])])]),_:1},8,["data","default-expanded-keys"])])}}},ae=L(Q,[["__scopeId","data-v-4e88459b"]]);export{ae as default};
