import{_,r as T,z as v,w as l,F as b,h as s,H as k,I as E,d as J,e as d,i as r,k as u,l as c,m as y,q as j,s as B}from"./index-CwdKQqOf.js";import D from"./ActionTypeSelector-D6XzvoPv.js";import h from"./TargetTypeSelector-DMvPq2hV.js";import $ from"./TargetObjectSelector-D57w5mnf.js";import H from"./ActionParamsConfig-D_MeBCNX.js";import z from"./BasicInfoSection-BjcOnwIf.js";import{s as F,a as G,b as M,T as I,v as R,g as S}from"./actionConfig-C-hhf0v-.js";import"./NodeSelector-Ct-lJUlq.js";import"./superBomStructure-BzSqI57Q.js";import"./AttributeSelector-D3T3OJek.js";import"./bom-DdrUuB8x.js";import"./superBomDynamicAttribute-BGTx_QxK.js";import"./superBomProductRelation-e2EKVMIZ.js";import"./superBomRuleRelation-Cz_bCmLL.js";import"./superBomVariable-gMrvMuGl.js";const Y={class:"action-content"},K={__name:"ActionContent",props:{element:{type:Object,required:!0},isExpanded:{type:Boolean,required:!0},bomId:{type:[String,Number],required:!0}},emits:["update:element","validate"],setup(i,{emit:P}){const n=T(!1),p=i,g=P,e=T({actionType:"",targetType:"",targetId:"",structureId:"",attributeId:"",actionParams:"{}",actionPriority:1,actionStatus:"0",actionSequence:1,version:"1.0",description:"",structure:null,attribute:null,dynamicAttribute:null,...p.element}),C=v(()=>F(e.value.actionType)),N=v(()=>G(e.value.actionType,e.value.targetType)),V=v(()=>M(e.value.actionType,e.value.targetType));l(()=>[e.value.targetType,e.value.targetId],([o,t])=>{o===I.NODE&&!n.value&&(n.value=!0,e.value.structureId=t,b(()=>{n.value=!1}))},{immediate:!0}),l(()=>e.value.structureId,o=>{e.value.targetType===I.NODE&&!n.value&&(n.value=!0,e.value.targetId=o,b(()=>{n.value=!1}))}),l(()=>p.element,o=>{JSON.stringify(o)!==JSON.stringify(e.value)&&(e.value={...o})},{deep:!0}),l(e,o=>{if(JSON.stringify(o)!==JSON.stringify(p.element)){g("update:element",{...o});const t=R(o);g("validate",t)}},{deep:!0});const O=o=>{e.value.targetType="",e.value.targetId="",e.value.structureId="",e.value.attributeId="";const t=S(o,"");e.value.actionParams=JSON.stringify(t)},U=o=>{e.value.targetId="",e.value.structureId="",e.value.attributeId="";const t=S(e.value.actionType,o);e.value.actionParams=JSON.stringify(t)},q=o=>{e.value.targetId=o},w=o=>{e.value.actionParams=o};return(o,t)=>{const m=s("el-col"),f=s("el-row"),x=s("el-divider"),A=s("el-form");return k((d(),J("div",Y,[r(A,{model:e.value,"label-position":"top","label-width":"100px",onSubmit:t[11]||(t[11]=B(()=>{},["prevent"]))},{default:u(()=>[r(f,{gutter:20},{default:u(()=>[r(m,{span:12},{default:u(()=>[r(D,{modelValue:e.value.actionType,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.actionType=a),onChange:O},null,8,["modelValue"])]),_:1}),C.value?(d(),c(m,{key:0,span:12},{default:u(()=>[r(h,{modelValue:e.value.targetType,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.targetType=a),"action-type":e.value.actionType,onChange:U},null,8,["modelValue","action-type"])]),_:1})):y("",!0)]),_:1}),N.value?(d(),c(f,{key:0,gutter:20,style:{"margin-top":"15px"}},{default:u(()=>[r(m,{span:24},{default:u(()=>[r($,{modelValue:e.value.targetId,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.targetId=a),"structure-id":e.value.structureId,"onUpdate:structureId":t[3]||(t[3]=a=>e.value.structureId=a),"attribute-id":e.value.attributeId,"onUpdate:attributeId":t[4]||(t[4]=a=>e.value.attributeId=a),"action-type":e.value.actionType,"target-type":e.value.targetType,"bom-id":i.bomId,structure:e.value.structure,onChange:q},null,8,["modelValue","structure-id","attribute-id","action-type","target-type","bom-id","structure"])]),_:1})]),_:1})):y("",!0),V.value?y("",!0):(d(),c(H,{key:1,modelValue:e.value.actionParams,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.actionParams=a),"action-type":e.value.actionType,"target-type":e.value.targetType,"attribute-id":e.value.attributeId,"bom-id":i.bomId,onChange:w},null,8,["modelValue","action-type","target-type","attribute-id","bom-id"])),r(x,{"content-position":"left"},{default:u(()=>t[12]||(t[12]=[j("基本信息")])),_:1,__:[12]}),r(z,{priority:e.value.actionPriority,"onUpdate:priority":t[6]||(t[6]=a=>e.value.actionPriority=a),status:e.value.actionStatus,"onUpdate:status":t[7]||(t[7]=a=>e.value.actionStatus=a),sequence:e.value.actionSequence,"onUpdate:sequence":t[8]||(t[8]=a=>e.value.actionSequence=a),version:e.value.version,"onUpdate:version":t[9]||(t[9]=a=>e.value.version=a),description:e.value.description,"onUpdate:description":t[10]||(t[10]=a=>e.value.description=a)},null,8,["priority","status","sequence","version","description"])]),_:1},8,["model"])],512)),[[E,i.isExpanded]])}}},de=_(K,[["__scopeId","data-v-3204c417"]]);export{de as default};
