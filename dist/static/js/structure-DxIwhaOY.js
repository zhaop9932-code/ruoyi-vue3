import{_ as Oe,p as ke,r as v,g as w,i as he,y as qe,a as p,c as oe,o as q,b as t,q as Y,w as o,e as c,t as B,z as Be,f as y,m as ne,A as Ae,E as f,n as Re}from"./index-kbfDsxmo.js";import{b as ze,c as Fe,e as Pe,f as Le,g as Me,h as Je,i as $e,j as je}from"./bom-uPfK0qwF.js";const Xe={class:"app-container"},Ye={class:"title"},Ge={class:"tree-container"},He={class:"tree-node"},Ke={class:"tree-operations",style:{"margin-top":"10px"}},We={class:"constraint-section",style:{"margin-top":"30px"}},Ze={class:"form-operations",style:{"margin-top":"20px"}},et={class:"attribute-operations",style:{"margin-bottom":"20px"}},tt={class:"attribute-value-header",style:{"margin-bottom":"20px"}},lt={class:"dialog-footer"},ot={__name:"structure",setup(nt){const G=ke(),C=v(G.query.bomId||""),ae=v(G.query.bomName||""),O=v([]),r=v(null),Q=v(!1),H=v({}),S=v(null),K=v(null),de=v(null),T=v("nodeDetail"),E=v(!1),W=v(null),A=v("å…³è”å±žæ€§"),R=v([]),s=w({id:null,bomStructureId:null,attributeId:null,isRequired:"0",defaultValue:"",sortOrder:1}),k=w({configSessionId:""}),z=v([]),F=v(""),ie={label:"nodeName",children:"children"},e=w({bomStructureId:null,parentNodeId:null,bomId:C.value,rootNodeId:null,nodeCode:"",nodeName:"",nodeType:"0",conditionExpr:"",defaultQuantity:1,minQuantity:1,maxQuantity:null,minQuantityExpr:"",maxQuantityExpr:"",constraintType:"",constraintConfig:"",depth:1,sortOrder:1,nodeStatus:"0",delFlag:"0",nodePath:"",version:"",versionDescription:"",isLatest:"1",versionStatus:"",approvalStatus:"",approvalBy:"",approvalTime:"",effectiveDate:"",expireDate:"",isActive:"1",dependentNodeIds:"",dependencyType:"",dependencyCondition:"",replaceableNodeIds:"",replacementCondition:"",costType:"",costCurrency:"",costCalculationRule:"",costComponents:"",price:null,priceType:"",priceCurrency:"",priceCalculationRule:"",priceComponents:"",iconUrl:"",nodeStyle:"",nodeColor:"",nodeShape:"",longDescription:"",documentationUrl:"",helpText:"",exampleUsage:""}),ue=w({nodeName:[{required:!0,message:"èŠ‚ç‚¹åç§°ä¸èƒ½ä¸ºç©º",trigger:"blur"}],nodeCode:[{required:!0,message:"èŠ‚ç‚¹ç¼–ç ä¸èƒ½ä¸ºç©º",trigger:"blur"}],defaultQuantity:[{required:!0,message:"é»˜è®¤æ•°é‡ä¸èƒ½ä¸ºç©º",trigger:"blur"}],minQuantity:[{required:!0,message:"æœ€å°æ•°é‡ä¸èƒ½ä¸ºç©º",trigger:"blur"}]}),re=w({attributeId:[{required:!0,message:"å±žæ€§ä¸èƒ½ä¸ºç©º",trigger:"change"}],sortOrder:[{required:!0,message:"æŽ’åºä¸èƒ½ä¸ºç©º",trigger:"blur"}]}),P=async()=>{try{const d=await ze(C.value);O.value=d.data||[]}catch{f.error("èŽ·å–BOMç»“æž„æ ‘å¤±è´¥"),O.value=[{bomStructureId:1,parentNodeId:0,bomId:C.value,rootNodeId:1,nodeCode:"NODE-001",nodeName:"ä¸»ç»„ä»¶",nodeType:"1",conditionExpr:"",defaultQuantity:1,minQuantity:1,maxQuantity:null,depth:1,sortOrder:1,nodeStatus:"0",delFlag:"0",nodePath:"1",version:"1.0",isLatest:"1",isActive:"1",children:[{bomStructureId:2,parentNodeId:1,bomId:C.value,rootNodeId:1,nodeCode:"NODE-002",nodeName:"å­ç»„ä»¶1",nodeType:"1",conditionExpr:"",defaultQuantity:2,minQuantity:1,maxQuantity:null,depth:2,sortOrder:1,nodeStatus:"0",delFlag:"0",nodePath:"1/2",version:"1.0",isLatest:"1",isActive:"1",children:[{bomStructureId:4,parentNodeId:2,bomId:C.value,rootNodeId:1,nodeCode:"NODE-004",nodeName:"ç‰©æ–™1",nodeType:"0",conditionExpr:"",defaultQuantity:1,minQuantity:1,maxQuantity:null,depth:3,sortOrder:1,nodeStatus:"0",delFlag:"0",nodePath:"1/2/4",version:"1.0",isLatest:"1",isActive:"1"},{bomStructureId:5,parentNodeId:2,bomId:C.value,rootNodeId:1,nodeCode:"NODE-005",nodeName:"ç‰©æ–™2",nodeType:"0",conditionExpr:"",defaultQuantity:1,minQuantity:1,maxQuantity:null,depth:3,sortOrder:2,nodeStatus:"0",delFlag:"0",nodePath:"1/2/5",version:"1.0",isLatest:"1",isActive:"1"}]},{bomStructureId:3,parentNodeId:1,bomId:C.value,rootNodeId:1,nodeCode:"NODE-003",nodeName:"å­ç»„ä»¶2",nodeType:"1",conditionExpr:"",defaultQuantity:1,minQuantity:1,maxQuantity:null,depth:2,sortOrder:2,nodeStatus:"0",delFlag:"0",nodePath:"1/3",version:"1.0",isLatest:"1",isActive:"1",children:[{bomStructureId:6,parentNodeId:3,bomId:C.value,rootNodeId:1,nodeCode:"NODE-006",nodeName:"ç‰©æ–™3",nodeType:"0",conditionExpr:"",defaultQuantity:1,minQuantity:1,maxQuantity:null,depth:3,sortOrder:1,nodeStatus:"0",delFlag:"0",nodePath:"1/3/6",version:"1.0",isLatest:"1",isActive:"1"}]}]}]}},L=async d=>{const l=i=>{for(const N of i){if(N.bomStructureId===d)return N;if(N.children&&N.children.length>0){const m=l(N.children);if(m)return m}}return null},a=l(O.value);if(a){if(e.bomStructureId=a.bomStructureId,e.parentNodeId=a.parentNodeId,e.bomId=a.bomId,e.rootNodeId=a.rootNodeId,e.nodeCode=a.nodeCode,e.nodeName=a.nodeName,e.nodeType=a.nodeType,e.conditionExpr=a.conditionExpr,e.defaultQuantity=a.defaultQuantity,e.minQuantity=a.minQuantity,e.maxQuantity=a.maxQuantity,e.minQuantityExpr=a.minQuantityExpr||"",e.maxQuantityExpr=a.maxQuantityExpr||"",e.constraintType=a.constraintType||"",e.constraintConfig=a.constraintConfig||"",e.depth=a.depth,e.sortOrder=a.sortOrder,e.nodeStatus=a.nodeStatus,e.delFlag=a.delFlag,e.nodePath=a.nodePath,e.version=a.version,e.versionDescription=a.versionDescription||"",e.isLatest=a.isLatest,e.versionStatus=a.versionStatus||"",e.approvalStatus=a.approvalStatus||"",e.approvalBy=a.approvalBy||"",e.approvalTime=a.approvalTime||"",e.effectiveDate=a.effectiveDate||"",e.expireDate=a.expireDate||"",e.isActive=a.isActive,e.dependentNodeIds=a.dependentNodeIds||"",e.dependencyType=a.dependencyType||"",e.dependencyCondition=a.dependencyCondition||"",e.replaceableNodeIds=a.replaceableNodeIds||"",e.replacementCondition=a.replacementCondition||"",e.costType=a.costType||"",e.costCurrency=a.costCurrency||"",e.costCalculationRule=a.costCalculationRule||"",e.costComponents=a.costComponents||"",e.price=a.price,e.priceType=a.priceType||"",e.priceCurrency=a.priceCurrency||"",e.priceCalculationRule=a.priceCalculationRule||"",e.priceComponents=a.priceComponents||"",e.iconUrl=a.iconUrl||"",e.nodeStyle=a.nodeStyle||"",e.nodeColor=a.nodeColor||"",e.nodeShape=a.nodeShape||"",e.longDescription=a.longDescription||"",e.documentationUrl=a.documentationUrl||"",e.helpText=a.helpText||"",e.exampleUsage=a.exampleUsage||"",e.constraintConfig&&typeof e.constraintConfig=="string")try{const i=JSON.parse(e.constraintConfig);i.type&&(e.constraintType=i.type),i.condition&&(e.conditionExpr=i.condition),i.quantity&&(i.quantity.default!==void 0&&(e.defaultQuantity=i.quantity.default),i.quantity.min!==void 0&&(e.minQuantity=i.quantity.min),i.quantity.max!==void 0&&(e.maxQuantity=i.quantity.max),i.quantity.minExpr&&(e.minQuantityExpr=i.quantity.minExpr),i.quantity.maxExpr&&(e.maxQuantityExpr=i.quantity.maxExpr)),i.dependency&&(i.dependency.nodes&&i.dependency.nodes.length&&(e.dependentNodeIds=i.dependency.nodes.join(",")),i.dependency.type&&(e.dependencyType=i.dependency.type),i.dependency.condition&&(e.dependencyCondition=i.dependency.condition)),i.combination&&(i.combination.replaceableNodes&&i.combination.replaceableNodes.length&&(e.replaceableNodeIds=i.combination.replaceableNodes.join(",")),i.combination.condition&&(e.replacementCondition=i.combination.condition))}catch{console.log("Constraint config is not valid JSON, keeping as-is")}M(a.bomStructureId),J(a.bomStructureId)}},M=async d=>{try{const l=await $e(d);R.value=l.data||[]}catch{f.error("èŽ·å–å±žæ€§åˆ—è¡¨å¤±è´¥"),R.value=[]}},J=async d=>{try{const l=await je({bomStructureId:d,configSessionId:k.configSessionId});z.value=l.rows||[]}catch{f.error("èŽ·å–å±žæ€§å€¼åˆ—è¡¨å¤±è´¥"),z.value=[]}},se=d=>{r.value=d,L(d.bomStructureId)},pe=(d,l)=>{d.preventDefault(),S.value=l,Q.value=!0,H.value={left:d.clientX+"px",top:d.clientY+"px",position:"fixed",zIndex:1e3}},me=()=>{h(),r.value=null,T.value="nodeDetail"},ce=()=>{h(),e.parentNodeId=S.value.bomStructureId,e.rootNodeId=S.value.rootNodeId,e.depth=S.value.depth+1,Q.value=!1,r.value=null,T.value="nodeDetail"},ye=()=>{r.value=S.value,L(S.value.bomStructureId),Q.value=!1,T.value="nodeDetail"},Z=async()=>{const d=r.value||S.value;if(d){await Re.confirm("ç¡®å®šè¦åˆ é™¤è¯¥èŠ‚ç‚¹å—ï¼Ÿ","è­¦å‘Š",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});try{await Fe([d.bomStructureId]),f.success("åˆ é™¤æˆåŠŸ"),P(),r.value=null,Q.value=!1}catch{f.error("åˆ é™¤å¤±è´¥")}}},fe=async()=>{await K.value.validate();try{if(!e.constraintConfig&&e.constraintType){const d={type:e.constraintType,condition:e.conditionExpr,quantity:{default:e.defaultQuantity,min:e.minQuantity,max:e.maxQuantity,minExpr:e.minQuantityExpr,maxExpr:e.maxQuantityExpr},dependency:{nodes:e.dependentNodeIds?e.dependentNodeIds.split(",").map(l=>parseInt(l.trim())):[],type:e.dependencyType,condition:e.dependencyCondition},combination:{replaceableNodes:e.replaceableNodeIds?e.replaceableNodeIds.split(",").map(l=>parseInt(l.trim())):[],condition:e.replacementCondition}};e.constraintConfig=JSON.stringify(d,null,2)}e.bomStructureId?(await Pe(e),f.success("ä¿®æ”¹æˆåŠŸ")):(await Le(e),f.success("æ–°å¢žæˆåŠŸ")),P(),h(),r.value=null}catch{f.error("æ“ä½œå¤±è´¥")}},be=()=>{h(),r.value&&L(r.value.bomStructureId)},h=()=>{e.bomStructureId=null,e.parentNodeId=r.value?r.value.bomStructureId:0,e.bomId=C.value,e.rootNodeId=r.value?r.value.rootNodeId:null,e.nodeCode="",e.nodeName="",e.nodeType="0",e.conditionExpr="",e.defaultQuantity=1,e.minQuantity=1,e.maxQuantity=null,e.minQuantityExpr="",e.maxQuantityExpr="",e.constraintType="",e.constraintConfig="",e.depth=r.value?r.value.depth+1:1,e.sortOrder=1,e.nodeStatus="0",e.delFlag="0",e.nodePath="",e.version="",e.versionDescription="",e.isLatest="1",e.versionStatus="",e.approvalStatus="",e.approvalBy="",e.approvalTime="",e.effectiveDate="",e.expireDate="",e.isActive="1",e.dependentNodeIds="",e.dependencyType="",e.dependencyCondition="",e.replaceableNodeIds="",e.replacementCondition="",e.costType="",e.costCurrency="",e.costCalculationRule="",e.costComponents="",e.price=null,e.priceType="",e.priceCurrency="",e.priceCalculationRule="",e.priceComponents="",e.iconUrl="",e.nodeStyle="",e.nodeColor="",e.nodeShape="",e.longDescription="",e.documentationUrl="",e.helpText="",e.exampleUsage="",F.value=""},ve=d=>{T.value=d,d==="attribute"&&r.value?M(r.value.bomStructureId):d==="attributeValue"&&r.value&&J(r.value.bomStructureId)},xe=()=>{A.value="å…³è”å±žæ€§",s.id=null,s.bomStructureId=r.value.bomStructureId,s.attributeId=null,s.isRequired="0",s.defaultValue="",s.sortOrder=1,E.value=!0},_e=d=>{A.value="ç¼–è¾‘å±žæ€§",s.id=d.id,s.bomStructureId=d.bomStructureId,s.attributeId=d.attributeId,s.isRequired=d.isRequired,s.defaultValue=d.defaultValue,s.sortOrder=d.sortOrder,E.value=!0},Ve=d=>{f.info("å±žæ€§åˆ é™¤åŠŸèƒ½å¾…å®žçŽ°")},Ce=()=>{f.info("æ‰¹é‡æ›´æ–°å±žæ€§åŠŸèƒ½å¾…å®žçŽ°")},Ie=async()=>{await W.value.validate();try{s.id?(await Me(s.bomStructureId,[s]),f.success("ä¿®æ”¹æˆåŠŸ")):(await Je([s]),f.success("å…³è”æˆåŠŸ")),M(s.bomStructureId),E.value=!1}catch{f.error("æ“ä½œå¤±è´¥")}},ge=()=>{r.value&&J(r.value.bomStructureId)},Se=()=>{f.info("åˆ›å»ºé…ç½®ä¼šè¯åŠŸèƒ½å¾…å®žçŽ°")},Ne=d=>{f.info("ç¼–è¾‘å±žæ€§å€¼åŠŸèƒ½å¾…å®žçŽ°")},Qe=()=>{f.info("BOMå¯¼å…¥åŠŸèƒ½å¾…å®žçŽ°")},Te=()=>{f.info("BOMå¯¼å‡ºåŠŸèƒ½å¾…å®žçŽ°")},ee=()=>{Q.value=!1};return he(()=>{P(),document.addEventListener("click",ee)}),qe(()=>{document.removeEventListener("click",ee)}),(d,l)=>{const a=p("el-card"),i=p("el-tag"),N=p("el-tree"),m=p("el-button"),_=p("el-col"),x=p("el-input"),u=p("el-form-item"),b=p("el-option"),D=p("el-select"),I=p("el-input-number"),U=p("el-row"),te=p("el-divider"),$=p("el-collapse-item"),Ee=p("el-collapse"),j=p("el-form"),X=p("el-tab-pane"),V=p("el-table-column"),le=p("el-table"),De=p("el-tabs"),Ue=p("el-switch"),we=p("el-dialog");return q(),oe("div",Xe,[t(a,{shadow:"never",class:"mb8"},{default:o(()=>[c("div",Ye,[c("h3",null,B(ae.value)+" - BOMç»“æž„ç®¡ç†",1)])]),_:1}),t(U,{gutter:20},{default:o(()=>[t(_,{span:10},{default:o(()=>[t(a,{shadow:"never",title:"BOMç»“æž„"},{default:o(()=>[c("div",Ge,[t(N,{ref_key:"bomTree",ref:de,data:O.value,props:ie,"expand-on-click-node":!1,onNodeClick:se,onNodeContextmenu:pe,"node-key":"bomStructureId","default-expand-all":""},{default:o(({node:n,data:g})=>[c("div",He,[c("span",{class:Be({"node-selected":r.value&&r.value.bomStructureId===g.bomStructureId})},B(n.label),3),t(i,{type:g.nodeType==="0"?"primary":g.nodeType==="1"?"success":"warning",size:"small",class:"node-type-tag"},{default:o(()=>[y(B(g.nodeType==="0"?"ç‰©æ–™":g.nodeType==="1"?"ç»„ä»¶":"æœåŠ¡"),1)]),_:2},1032,["type"])])]),_:1},8,["data"])]),c("div",Ke,[t(m,{type:"primary",icon:"Plus",size:"small",onClick:me},{default:o(()=>l[34]||(l[34]=[y(" æ–°å¢žèŠ‚ç‚¹ ")])),_:1,__:[34]}),t(m,{type:"danger",icon:"Delete",size:"small",disabled:!r.value,onClick:Z},{default:o(()=>l[35]||(l[35]=[y(" åˆ é™¤èŠ‚ç‚¹ ")])),_:1,__:[35]},8,["disabled"]),t(m,{type:"info",icon:"Upload",size:"small",onClick:Qe},{default:o(()=>l[36]||(l[36]=[y(" å¯¼å…¥BOM ")])),_:1,__:[36]}),t(m,{type:"warning",icon:"Download",size:"small",onClick:Te},{default:o(()=>l[37]||(l[37]=[y(" å¯¼å‡ºBOM ")])),_:1,__:[37]})])]),_:1})]),_:1}),t(_,{span:14},{default:o(()=>[t(a,{shadow:"never"},{default:o(()=>[t(De,{modelValue:T.value,"onUpdate:modelValue":l[27]||(l[27]=n=>T.value=n),onTabChange:ve},{default:o(()=>[t(X,{label:"èŠ‚ç‚¹è¯¦æƒ…",name:"nodeDetail"},{default:o(()=>[t(j,{ref_key:"nodeFormRef",ref:K,model:e,rules:ue,"label-width":"120px"},{default:o(()=>[t(U,{gutter:20},{default:o(()=>[t(_,{span:12},{default:o(()=>[t(u,{label:"èŠ‚ç‚¹åç§°",prop:"nodeName"},{default:o(()=>[t(x,{modelValue:e.nodeName,"onUpdate:modelValue":l[0]||(l[0]=n=>e.nodeName=n),placeholder:"è¯·è¾“å…¥èŠ‚ç‚¹åç§°"},null,8,["modelValue"])]),_:1}),t(u,{label:"èŠ‚ç‚¹ç¼–ç ",prop:"nodeCode"},{default:o(()=>[t(x,{modelValue:e.nodeCode,"onUpdate:modelValue":l[1]||(l[1]=n=>e.nodeCode=n),placeholder:"è¯·è¾“å…¥èŠ‚ç‚¹ç¼–ç "},null,8,["modelValue"])]),_:1}),t(u,{label:"èŠ‚ç‚¹ç±»åž‹",prop:"nodeType"},{default:o(()=>[t(D,{modelValue:e.nodeType,"onUpdate:modelValue":l[2]||(l[2]=n=>e.nodeType=n),placeholder:"è¯·é€‰æ‹©èŠ‚ç‚¹ç±»åž‹"},{default:o(()=>[t(b,{label:"ç‰©æ–™",value:"0"}),t(b,{label:"ç»„ä»¶",value:"1"}),t(b,{label:"æœåŠ¡",value:"2"})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"é»˜è®¤æ•°é‡",prop:"defaultQuantity"},{default:o(()=>[t(I,{modelValue:e.defaultQuantity,"onUpdate:modelValue":l[3]||(l[3]=n=>e.defaultQuantity=n),min:.1,step:.1},null,8,["modelValue"])]),_:1}),t(u,{label:"æœ€å°æ•°é‡",prop:"minQuantity"},{default:o(()=>[t(I,{modelValue:e.minQuantity,"onUpdate:modelValue":l[4]||(l[4]=n=>e.minQuantity=n),min:.1,step:.1},null,8,["modelValue"])]),_:1}),t(u,{label:"æœ€å¤§æ•°é‡",prop:"maxQuantity"},{default:o(()=>[t(I,{modelValue:e.maxQuantity,"onUpdate:modelValue":l[5]||(l[5]=n=>e.maxQuantity=n),min:.1,step:.1},null,8,["modelValue"])]),_:1}),t(u,{label:"èŠ‚ç‚¹çŠ¶æ€",prop:"nodeStatus"},{default:o(()=>[t(D,{modelValue:e.nodeStatus,"onUpdate:modelValue":l[6]||(l[6]=n=>e.nodeStatus=n),placeholder:"è¯·é€‰æ‹©èŠ‚ç‚¹çŠ¶æ€"},{default:o(()=>[t(b,{label:"å¯ç”¨",value:"0"}),t(b,{label:"ç¦ç”¨",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"èŠ‚ç‚¹æ·±åº¦",prop:"depth"},{default:o(()=>[t(I,{modelValue:e.depth,"onUpdate:modelValue":l[7]||(l[7]=n=>e.depth=n),min:1,step:1,disabled:!0},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:12},{default:o(()=>[t(u,{label:"èŠ‚ç‚¹æŽ’åº",prop:"sortOrder"},{default:o(()=>[t(I,{modelValue:e.sortOrder,"onUpdate:modelValue":l[8]||(l[8]=n=>e.sortOrder=n),min:1,step:1},null,8,["modelValue"])]),_:1}),t(u,{label:"ç‰ˆæœ¬",prop:"version"},{default:o(()=>[t(x,{modelValue:e.version,"onUpdate:modelValue":l[9]||(l[9]=n=>e.version=n),placeholder:"è¯·è¾“å…¥ç‰ˆæœ¬"},null,8,["modelValue"])]),_:1}),t(u,{label:"ç‰ˆæœ¬æè¿°",prop:"versionDescription"},{default:o(()=>[t(x,{modelValue:e.versionDescription,"onUpdate:modelValue":l[10]||(l[10]=n=>e.versionDescription=n),placeholder:"è¯·è¾“å…¥ç‰ˆæœ¬æè¿°"},null,8,["modelValue"])]),_:1}),t(u,{label:"è¯¦ç»†æè¿°",prop:"longDescription"},{default:o(()=>[t(x,{modelValue:e.longDescription,"onUpdate:modelValue":l[11]||(l[11]=n=>e.longDescription=n),type:"textarea",placeholder:"è¯·è¾“å…¥è¯¦ç»†æè¿°",rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),c("div",We,[l[39]||(l[39]=c("h4",{style:{"margin-bottom":"20px",color:"#333","font-weight":"bold"}},"ðŸ”— çº¦æŸé…ç½®",-1)),t(te,{style:{margin:"15px 0"}}),t(U,{gutter:20},{default:o(()=>[t(_,{span:12},{default:o(()=>[t(u,{label:"çº¦æŸç±»åž‹",prop:"constraintType"},{default:o(()=>[t(D,{modelValue:e.constraintType,"onUpdate:modelValue":l[12]||(l[12]=n=>e.constraintType=n),placeholder:"è¯·é€‰æ‹©çº¦æŸç±»åž‹"},{default:o(()=>[t(b,{label:"æ— çº¦æŸ",value:""}),t(b,{label:"æ¡ä»¶çº¦æŸ",value:"condition"}),t(b,{label:"æ•°é‡çº¦æŸ",value:"quantity"}),t(b,{label:"ä¾èµ–çº¦æŸ",value:"dependency"}),t(b,{label:"ç»„åˆçº¦æŸ",value:"combination"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(_,{span:12},{default:o(()=>[t(u,{label:"æ¡ä»¶è¡¨è¾¾å¼",prop:"conditionExpr"},{default:o(()=>[t(x,{modelValue:e.conditionExpr,"onUpdate:modelValue":l[13]||(l[13]=n=>e.conditionExpr=n),placeholder:"å¦‚: parent.attr == 'value'"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(Ee,{modelValue:F.value,"onUpdate:modelValue":l[24]||(l[24]=n=>F.value=n),accordion:""},{default:o(()=>[t($,{title:"ðŸ“Š æ•°é‡çº¦æŸ",name:"quantity"},{default:o(()=>[t(U,{gutter:20},{default:o(()=>[t(_,{span:8},{default:o(()=>[t(u,{label:"é»˜è®¤æ•°é‡",prop:"defaultQuantity"},{default:o(()=>[t(I,{modelValue:e.defaultQuantity,"onUpdate:modelValue":l[14]||(l[14]=n=>e.defaultQuantity=n),min:.1,step:.1},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:8},{default:o(()=>[t(u,{label:"æœ€å°æ•°é‡",prop:"minQuantity"},{default:o(()=>[t(I,{modelValue:e.minQuantity,"onUpdate:modelValue":l[15]||(l[15]=n=>e.minQuantity=n),min:.1,step:.1},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:8},{default:o(()=>[t(u,{label:"æœ€å¤§æ•°é‡",prop:"maxQuantity"},{default:o(()=>[t(I,{modelValue:e.maxQuantity,"onUpdate:modelValue":l[16]||(l[16]=n=>e.maxQuantity=n),min:.1,step:.1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(U,{gutter:20},{default:o(()=>[t(_,{span:12},{default:o(()=>[t(u,{label:"æœ€å°æ•°é‡è¡¨è¾¾å¼",prop:"minQuantityExpr"},{default:o(()=>[t(x,{modelValue:e.minQuantityExpr,"onUpdate:modelValue":l[17]||(l[17]=n=>e.minQuantityExpr=n),placeholder:"å¦‚: parent.quantity * 2"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:12},{default:o(()=>[t(u,{label:"æœ€å¤§æ•°é‡è¡¨è¾¾å¼",prop:"maxQuantityExpr"},{default:o(()=>[t(x,{modelValue:e.maxQuantityExpr,"onUpdate:modelValue":l[18]||(l[18]=n=>e.maxQuantityExpr=n),placeholder:"å¦‚: parent.quantity * 5"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t($,{title:"ðŸ”— ä¾èµ–çº¦æŸ",name:"dependency"},{default:o(()=>[t(u,{label:"ä¾èµ–èŠ‚ç‚¹ID",prop:"dependentNodeIds"},{default:o(()=>[t(x,{modelValue:e.dependentNodeIds,"onUpdate:modelValue":l[19]||(l[19]=n=>e.dependentNodeIds=n),placeholder:"å¤šä¸ªèŠ‚ç‚¹IDç”¨é€—å·åˆ†éš”"},null,8,["modelValue"])]),_:1}),t(u,{label:"ä¾èµ–ç±»åž‹",prop:"dependencyType"},{default:o(()=>[t(D,{modelValue:e.dependencyType,"onUpdate:modelValue":l[20]||(l[20]=n=>e.dependencyType=n),placeholder:"è¯·é€‰æ‹©ä¾èµ–ç±»åž‹"},{default:o(()=>[t(b,{label:"å¿…é¡»åŒ…å«",value:"mandatory"}),t(b,{label:"äº’æ–¥",value:"exclusive"}),t(b,{label:"æ¡ä»¶ä¾èµ–",value:"conditional"})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"ä¾èµ–æ¡ä»¶",prop:"dependencyCondition"},{default:o(()=>[t(x,{modelValue:e.dependencyCondition,"onUpdate:modelValue":l[21]||(l[21]=n=>e.dependencyCondition=n),type:"textarea",placeholder:"ä¾èµ–æ¡ä»¶è¡¨è¾¾å¼",rows:2},null,8,["modelValue"])]),_:1})]),_:1}),t($,{title:"ðŸ§© ç»„åˆçº¦æŸ",name:"combination"},{default:o(()=>[t(u,{label:"æ›¿æ¢èŠ‚ç‚¹ID",prop:"replaceableNodeIds"},{default:o(()=>[t(x,{modelValue:e.replaceableNodeIds,"onUpdate:modelValue":l[22]||(l[22]=n=>e.replaceableNodeIds=n),placeholder:"å¤šä¸ªèŠ‚ç‚¹IDç”¨é€—å·åˆ†éš”"},null,8,["modelValue"])]),_:1}),t(u,{label:"æ›¿æ¢æ¡ä»¶",prop:"replacementCondition"},{default:o(()=>[t(x,{modelValue:e.replacementCondition,"onUpdate:modelValue":l[23]||(l[23]=n=>e.replacementCondition=n),type:"textarea",placeholder:"æ›¿æ¢æ¡ä»¶è¡¨è¾¾å¼",rows:2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(te,{style:{margin:"15px 0"}}),t(u,{label:"çº¦æŸé…ç½®ï¼ˆJSONï¼‰",prop:"constraintConfig"},{default:o(()=>[t(x,{modelValue:e.constraintConfig,"onUpdate:modelValue":l[25]||(l[25]=n=>e.constraintConfig=n),type:"textarea",placeholder:"é«˜çº§é…ç½®ï¼šJSONæ ¼å¼çš„çº¦æŸé…ç½®",rows:5,style:{"font-family":"monospace"}},null,8,["modelValue"]),l[38]||(l[38]=c("div",{style:{"margin-top":"8px","font-size":"12px",color:"#999"}}," ðŸ’¡ æç¤ºï¼šå¯ç›´æŽ¥ç¼–è¾‘JSONé…ç½®ï¼Œæ”¯æŒå¤æ‚çº¦æŸé€»è¾‘ ",-1))]),_:1,__:[38]})])]),_:1},8,["model","rules"]),c("div",Ze,[t(m,{type:"primary",onClick:fe},{default:o(()=>l[40]||(l[40]=[y("ä¿å­˜")])),_:1,__:[40]}),t(m,{onClick:be},{default:o(()=>l[41]||(l[41]=[y("å–æ¶ˆ")])),_:1,__:[41]})])]),_:1}),r.value?(q(),ne(X,{key:0,label:"å±žæ€§ç®¡ç†",name:"attribute"},{default:o(()=>[c("div",et,[t(m,{type:"primary",icon:"Plus",size:"small",onClick:xe},{default:o(()=>l[42]||(l[42]=[y("å…³è”å±žæ€§")])),_:1,__:[42]}),t(m,{type:"success",icon:"Edit",size:"small",onClick:Ce},{default:o(()=>l[43]||(l[43]=[y("æ‰¹é‡æ›´æ–°")])),_:1,__:[43]})]),t(le,{data:R.value,border:"",style:{width:"100%"}},{default:o(()=>[t(V,{prop:"attribute.attributeName",label:"å±žæ€§åç§°",width:"180"}),t(V,{prop:"attribute.attributeCode",label:"å±žæ€§ç¼–ç ",width:"180"}),t(V,{prop:"isRequired",label:"æ˜¯å¦å¿…å¡«",width:"100"},{default:o(n=>[t(i,{type:n.row.isRequired==="1"?"danger":"success",size:"small"},{default:o(()=>[y(B(n.row.isRequired==="1"?"æ˜¯":"å¦"),1)]),_:2},1032,["type"])]),_:1}),t(V,{prop:"defaultValue",label:"é»˜è®¤å€¼"}),t(V,{prop:"sortOrder",label:"æŽ’åº",width:"80"}),t(V,{label:"æ“ä½œ",width:"150",fixed:"right"},{default:o(n=>[t(m,{type:"primary",size:"small",icon:"Edit",onClick:g=>_e(n.row)},{default:o(()=>l[44]||(l[44]=[y("ç¼–è¾‘")])),_:2,__:[44]},1032,["onClick"]),t(m,{type:"danger",size:"small",icon:"Delete",onClick:g=>Ve(n.row)},{default:o(()=>l[45]||(l[45]=[y("åˆ é™¤")])),_:2,__:[45]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})):Y("",!0),r.value?(q(),ne(X,{key:1,label:"å±žæ€§å€¼ç®¡ç†",name:"attributeValue"},{default:o(()=>[c("div",tt,[t(j,{model:k,inline:!0,size:"small"},{default:o(()=>[t(u,{label:"é…ç½®ä¼šè¯ID"},{default:o(()=>[t(x,{modelValue:k.configSessionId,"onUpdate:modelValue":l[26]||(l[26]=n=>k.configSessionId=n),placeholder:"è¯·è¾“å…¥é…ç½®ä¼šè¯ID",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),t(m,{type:"primary",icon:"Search",onClick:ge},{default:o(()=>l[46]||(l[46]=[y("æŸ¥è¯¢")])),_:1,__:[46]}),t(m,{type:"success",icon:"Plus",onClick:Se},{default:o(()=>l[47]||(l[47]=[y("åˆ›å»ºä¼šè¯")])),_:1,__:[47]})]),_:1},8,["model"])]),t(le,{data:z.value,border:"",style:{width:"100%"}},{default:o(()=>[t(V,{prop:"attribute.attributeName",label:"å±žæ€§åç§°",width:"180"}),t(V,{prop:"attribute.attributeCode",label:"å±žæ€§ç¼–ç ",width:"180"}),t(V,{prop:"attributeValueId",label:"å±žæ€§å€¼"}),t(V,{label:"æ“ä½œ",width:"150",fixed:"right"},{default:o(n=>[t(m,{type:"primary",size:"small",icon:"Edit",onClick:g=>Ne(n.row)},{default:o(()=>l[48]||(l[48]=[y("ç¼–è¾‘")])),_:2,__:[48]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})):Y("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),Q.value?(q(),oe("div",{key:0,ref:"contextMenu",style:Ae(H.value),class:"custom-context-menu"},[c("div",{class:"menu-item",onClick:ce},"æ–°å¢žå­èŠ‚ç‚¹"),c("div",{class:"menu-item",onClick:ye},"ç¼–è¾‘èŠ‚ç‚¹"),l[49]||(l[49]=c("div",{class:"menu-divider"},null,-1)),c("div",{class:"menu-item",onClick:Z},"åˆ é™¤èŠ‚ç‚¹")],4)):Y("",!0),t(we,{title:A.value,modelValue:E.value,"onUpdate:modelValue":l[33]||(l[33]=n=>E.value=n),width:"600px","append-to-body":""},{footer:o(()=>[c("span",lt,[t(m,{onClick:l[32]||(l[32]=n=>E.value=!1)},{default:o(()=>l[50]||(l[50]=[y("å–æ¶ˆ")])),_:1,__:[50]}),t(m,{type:"primary",onClick:Ie},{default:o(()=>l[51]||(l[51]=[y("ç¡®å®š")])),_:1,__:[51]})])]),default:o(()=>[t(j,{ref_key:"attributeFormRef",ref:W,model:s,rules:re,"label-width":"120px"},{default:o(()=>[t(u,{label:"å±žæ€§åç§°",prop:"attributeId"},{default:o(()=>[t(D,{modelValue:s.attributeId,"onUpdate:modelValue":l[28]||(l[28]=n=>s.attributeId=n),placeholder:"è¯·é€‰æ‹©å±žæ€§"},{default:o(()=>[t(b,{label:"ç¤ºä¾‹å±žæ€§1",value:"1"}),t(b,{label:"ç¤ºä¾‹å±žæ€§2",value:"2"}),t(b,{label:"ç¤ºä¾‹å±žæ€§3",value:"3"})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"æ˜¯å¦å¿…å¡«",prop:"isRequired"},{default:o(()=>[t(Ue,{modelValue:s.isRequired,"onUpdate:modelValue":l[29]||(l[29]=n=>s.isRequired=n),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1}),t(u,{label:"é»˜è®¤å€¼",prop:"defaultValue"},{default:o(()=>[t(x,{modelValue:s.defaultValue,"onUpdate:modelValue":l[30]||(l[30]=n=>s.defaultValue=n),placeholder:"è¯·è¾“å…¥é»˜è®¤å€¼"},null,8,["modelValue"])]),_:1}),t(u,{label:"æŽ’åº",prop:"sortOrder"},{default:o(()=>[t(I,{modelValue:s.sortOrder,"onUpdate:modelValue":l[31]||(l[31]=n=>s.sortOrder=n),min:1,step:1},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}},it=Oe(ot,[["__scopeId","data-v-d64ea6d2"]]);export{it as default};
