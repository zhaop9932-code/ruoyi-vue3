import{_ as D,g as T,r as B,h as c,a as d,c as y,o as f,b as e,w as t,e as i,t as L,F as O,s as S,m as G,f as g}from"./index-kbfDsxmo.js";const H={class:"advanced-config"},P={class:"priority-value"},R={__name:"RuleAdvancedConfig",props:{modelValue:{type:Object,default:()=>({})},ruleType:{type:String,default:"validation"}},emits:["update:modelValue"],setup(x,{emit:k}){const v=x,I=k,a=T({triggerTiming:[],priority:5,validityPeriod:[],executionLimit:0,executionInterval:0,dependencies:[],ruleGroup:"",executionMode:"sync",errorHandling:"continue",remark:"",...v.modelValue}),N=B([{ruleId:1,ruleName:"重量验证规则"},{ruleId:2,ruleName:"总价计算规则"},{ruleId:3,ruleName:"颜色折扣规则"},{ruleId:4,ruleName:"库存验证规则"}]);return c(a,()=>{I("update:modelValue",a)},{deep:!0}),c(()=>v.modelValue,p=>{p&&JSON.stringify(p)!==JSON.stringify(a)&&Object.assign(a,p)},{deep:!0}),(p,l)=>{const r=d("el-option"),m=d("el-select"),n=d("el-form-item"),u=d("el-col"),U=d("el-slider"),s=d("el-row"),Y=d("el-date-picker"),V=d("el-input-number"),b=d("el-input"),_=d("el-radio"),M=d("el-radio-group"),w=d("el-form"),C=d("el-card");return f(),y("div",H,[e(C,{shadow:"hover"},{header:t(()=>l[10]||(l[10]=[i("div",{class:"card-header"},[i("span",null,"高级配置")],-1)])),default:t(()=>[e(w,{model:a,"label-position":"top","label-width":"120px"},{default:t(()=>[e(s,{gutter:20},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(n,{label:"触发时机"},{default:t(()=>[e(m,{modelValue:a.triggerTiming,"onUpdate:modelValue":l[0]||(l[0]=o=>a.triggerTiming=o),placeholder:"请选择触发时机",multiple:"","collapse-tags":""},{default:t(()=>[e(r,{label:"配置时触发",value:"on_configure"}),e(r,{label:"定价时触发",value:"on_pricing"}),e(r,{label:"报价生成时触发",value:"on_quote_generate"}),e(r,{label:"订单提交时触发",value:"on_order_submit"}),e(r,{label:"订单变更时触发",value:"on_order_change"}),e(r,{label:"定时触发",value:"on_schedule"})]),_:1},8,["modelValue"]),l[11]||(l[11]=i("div",{class:"form-tip"},"可选择多个触发时机",-1))]),_:1,__:[11]})]),_:1}),e(u,{span:12},{default:t(()=>[e(n,{label:"触发优先级"},{default:t(()=>[e(U,{modelValue:a.priority,"onUpdate:modelValue":l[1]||(l[1]=o=>a.priority=o),min:1,max:10,marks:{1:"低",5:"中",10:"高"}},null,8,["modelValue"]),i("div",P,"当前优先级："+L(a.priority),1)]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(n,{label:"有效期"},{default:t(()=>[e(Y,{modelValue:a.validityPeriod,"onUpdate:modelValue":l[2]||(l[2]=o=>a.validityPeriod=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"]),l[12]||(l[12]=i("div",{class:"form-tip"},"为空表示永久有效",-1))]),_:1,__:[12]})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(n,{label:"执行次数限制"},{default:t(()=>[e(V,{modelValue:a.executionLimit,"onUpdate:modelValue":l[3]||(l[3]=o=>a.executionLimit=o),min:0,max:999999,step:1,placeholder:"请输入执行次数限制"},null,8,["modelValue"]),l[13]||(l[13]=i("div",{class:"form-tip"},"0表示无限制",-1))]),_:1,__:[13]})]),_:1}),e(u,{span:12},{default:t(()=>[e(n,{label:"执行间隔（秒）"},{default:t(()=>[e(V,{modelValue:a.executionInterval,"onUpdate:modelValue":l[4]||(l[4]=o=>a.executionInterval=o),min:0,max:86400,step:1,placeholder:"请输入执行间隔"},null,8,["modelValue"]),l[14]||(l[14]=i("div",{class:"form-tip"},"0表示无间隔限制",-1))]),_:1,__:[14]})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(n,{label:"规则依赖"},{default:t(()=>[e(m,{modelValue:a.dependencies,"onUpdate:modelValue":l[5]||(l[5]=o=>a.dependencies=o),placeholder:"请选择依赖的规则",multiple:"","collapse-tags":""},{default:t(()=>[(f(!0),y(O,null,S(N.value,o=>(f(),G(r,{key:o.ruleId,label:o.ruleName,value:o.ruleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l[15]||(l[15]=i("div",{class:"form-tip"},"选择当前规则依赖的其他规则，依赖规则会先执行",-1))]),_:1,__:[15]})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(n,{label:"规则分组"},{default:t(()=>[e(b,{modelValue:a.ruleGroup,"onUpdate:modelValue":l[6]||(l[6]=o=>a.ruleGroup=o),placeholder:"请输入规则分组"},null,8,["modelValue"]),l[16]||(l[16]=i("div",{class:"form-tip"},"用于规则的分类管理",-1))]),_:1,__:[16]})]),_:1}),e(u,{span:12},{default:t(()=>[e(n,{label:"执行模式"},{default:t(()=>[e(m,{modelValue:a.executionMode,"onUpdate:modelValue":l[7]||(l[7]=o=>a.executionMode=o),placeholder:"请选择执行模式"},{default:t(()=>[e(r,{label:"同步执行",value:"sync"}),e(r,{label:"异步执行",value:"async"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(n,{label:"错误处理策略"},{default:t(()=>[e(M,{modelValue:a.errorHandling,"onUpdate:modelValue":l[8]||(l[8]=o=>a.errorHandling=o)},{default:t(()=>[e(_,{label:"继续执行"},{default:t(()=>l[17]||(l[17]=[g("继续执行：忽略错误，继续执行后续规则")])),_:1,__:[17]}),e(_,{label:"终止执行"},{default:t(()=>l[18]||(l[18]=[g("终止执行：遇到错误立即终止所有规则执行")])),_:1,__:[18]}),e(_,{label:"回滚执行"},{default:t(()=>l[19]||(l[19]=[g("回滚执行：遇到错误回滚已执行的动作")])),_:1,__:[19]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{gutter:20},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(n,{label:"备注"},{default:t(()=>[e(b,{modelValue:a.remark,"onUpdate:modelValue":l[9]||(l[9]=o=>a.remark=o),type:"textarea",placeholder:"请输入备注信息",rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},A=D(R,[["__scopeId","data-v-3e3b20dc"]]);export{A as default};
