import{_ as M,r as w,g as R,H as S,a as u,c,o as l,e as s,m as B,k as y,b as o,t as e,f,w as i,l as v,b6 as T,b7 as j,F as N,n as x,M as q,P as G,E as b}from"./index-DgigFOm-.js";/* empty css                                                                       */const H={class:"pricing-details"},L={class:"pricing-summary"},O={class:"summary-item total"},Q={class:"value"},J={key:0,class:"discount-info"},K={class:"summary-item"},U={class:"value"},W={class:"summary-item discount"},X={class:"label"},Y={class:"value"},Z={class:"pricing-breakdown"},$={class:"breakdown-header"},ss={key:0,class:"empty-breakdown"},ts={key:1,class:"breakdown-list"},es={class:"item-header"},ns={class:"item-name"},os={class:"item-details"},as={class:"detail-row"},ls={class:"detail-value"},is={class:"detail-row"},cs={class:"detail-value"},ds={class:"detail-row subtotal"},rs={class:"detail-value"},us={class:"analysis-chart"},_s={class:"item-info"},ps={class:"item-label"},ms={class:"item-percent"},fs={class:"item-amount"},hs={class:"pricing-actions"},vs={__name:"PricingDetails",props:{pricingBreakdown:{type:Array,default:()=>[]},totalPrice:{type:Number,default:0},discountInfo:{type:Object,default:()=>({discountName:"",discountAmount:0})}},setup(a){const h=a,P=w(null),C=w(!1),I=R(()=>{if(h.pricingBreakdown.length===0)return[];const d=[],t=["#409eff","#67c23a","#e6a23c","#f56c6c","#909399"];return h.pricingBreakdown.forEach((r,p)=>{const m=Math.round(r.subtotal/h.totalPrice*100);d.push({label:r.nodeName,amount:r.subtotal,percent:m,color:t[p%t.length]})}),d.sort((r,p)=>p.amount-r.amount)}),_=d=>d.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),A=()=>{b.success("导出功能开发中")},E=()=>{b.success("分享功能开发中")},D=()=>{b.success("生成报价单功能开发中")};return S(()=>h.pricingBreakdown,d=>{d.length>0},{deep:!0}),(d,t)=>{const r=u("el-divider"),p=u("el-icon"),m=u("el-button"),V=u("el-empty"),z=u("el-tag"),k=u("el-card"),F=u("el-progress");return l(),c("div",H,[s("div",L,[s("div",O,[t[0]||(t[0]=s("span",{class:"label"},"配置总价",-1)),s("span",Q,"¥"+e(_(a.totalPrice)),1)]),o(r),a.discountInfo.discountAmount>0?(l(),c("div",J,[s("div",K,[t[1]||(t[1]=s("span",{class:"label"},"原价",-1)),s("span",U,"¥"+e(_(a.totalPrice+a.discountInfo.discountAmount)),1)]),s("div",W,[s("span",X,[o(p,null,{default:i(()=>[o(v(T))]),_:1}),f(" "+e(a.discountInfo.discountName),1)]),s("span",Y,"-¥"+e(_(a.discountInfo.discountAmount)),1)])])):y("",!0)]),s("div",Z,[s("div",$,[t[3]||(t[3]=s("h4",null,"价格明细",-1)),o(m,{type:"text",size:"small",onClick:A},{default:i(()=>[o(p,null,{default:i(()=>[o(v(j))]),_:1}),t[2]||(t[2]=f(" 导出明细 "))]),_:1,__:[2]})]),a.pricingBreakdown.length===0?(l(),c("div",ss,[o(V,{description:"暂无价格明细","image-size":80})])):(l(),c("div",ts,[(l(!0),c(N,null,x(a.pricingBreakdown,(n,g)=>(l(),c("div",{key:g,class:"breakdown-item"},[s("div",es,[s("span",ns,e(n.nodeName),1),o(z,{size:"small",type:"info"},{default:i(()=>[f(e(n.productName),1)]),_:2},1024)]),s("div",os,[s("div",as,[t[4]||(t[4]=s("span",{class:"detail-label"},"单价:",-1)),s("span",ls,"¥"+e(_(n.unitPrice)),1)]),s("div",is,[t[5]||(t[5]=s("span",{class:"detail-label"},"数量:",-1)),s("span",cs,e(n.quantity),1)]),s("div",ds,[t[6]||(t[6]=s("span",{class:"detail-label"},"小计:",-1)),s("span",rs,"¥"+e(_(n.subtotal)),1)])])]))),128))]))]),C.value?(l(),B(k,{key:0,class:"price-trend",shadow:"never"},{header:i(()=>t[7]||(t[7]=[s("span",null,"价格趋势",-1)])),default:i(()=>[s("div",{ref_key:"chartRef",ref:P,class:"trend-chart"},null,512)]),_:1})):y("",!0),a.pricingBreakdown.length>0?(l(),B(k,{key:1,class:"cost-analysis",shadow:"never"},{header:i(()=>t[8]||(t[8]=[s("span",null,"成本分析",-1)])),default:i(()=>[s("div",us,[(l(!0),c(N,null,x(I.value,(n,g)=>(l(),c("div",{key:g,class:"analysis-item"},[s("div",_s,[s("span",ps,e(n.label),1),s("span",ms,e(n.percent)+"%",1)]),o(F,{percentage:n.percent,color:n.color,"show-text":!1},null,8,["percentage","color"]),s("span",fs,"¥"+e(_(n.amount)),1)]))),128))])]),_:1})):y("",!0),s("div",hs,[o(m,{icon:v(q),onClick:E},{default:i(()=>t[9]||(t[9]=[f("分享配置")])),_:1,__:[9]},8,["icon"]),o(m,{type:"primary",icon:v(G),onClick:D},{default:i(()=>t[10]||(t[10]=[f(" 生成报价单 ")])),_:1,__:[10]},8,["icon"])])])}}},bs=M(vs,[["__scopeId","data-v-80e70d1f"]]);export{bs as default};
