import{_ as E,r as I,z as q,C as _,o as w,h as s,d as x,e as U,i as e,j as k,k as l,q as y,V as f}from"./index-CwdKQqOf.js";const F={class:"bom-basic-info"},R={class:"form-actions"},$={__name:"BomBasicInfo",props:{bomId:{type:[String,Number],required:!0},bomName:{type:String,default:""}},emits:["update"],setup(v,{emit:B}){const d=v,V=B,p=I(null),O=q(()=>!0),o=_({bomId:d.bomId,bomCode:"",bomName:d.bomName||"",bomType:"template",validationStrategy:"strict",ruleEngineType:"built-in",status:"enabled",bomRules:JSON.stringify({validationStrategy:"strict",ruleEngineType:"built-in"},null,2),configTemplate:"",description:""}),M=_({bomCode:[{required:!0,message:"BOM编码不能为空",trigger:"blur"}],bomName:[{required:!0,message:"BOM名称不能为空",trigger:"blur"}],bomType:[{required:!0,message:"请选择BOM类型",trigger:"change"}],validationStrategy:[{required:!0,message:"请选择验证策略",trigger:"change"}],ruleEngineType:[{required:!0,message:"请选择规则引擎类型",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}),T=async()=>{try{setTimeout(()=>{Object.assign(o,{bomCode:`BOM-${d.bomId}`,bomName:d.bomName||`测试BOM-${d.bomId}`,bomType:"template",validationStrategy:"strict",ruleEngineType:"built-in",status:"enabled",bomRules:JSON.stringify({validationStrategy:"strict",ruleEngineType:"built-in",version:"1.0"},null,2),configTemplate:'{"template": "default", "version": "1.0"}',description:`这是一个测试BOM，ID为${d.bomId}`})},500)}catch(n){f.error("获取BOM信息失败"),console.error("加载BOM信息失败:",n)}},N=async()=>{try{await p.value.validate(),setTimeout(()=>{f.success("BOM信息保存成功"),V("update",{bomName:o.bomName})},500)}catch(n){n!==!1&&(f.error("保存失败，请检查表单数据"),console.error("保存BOM信息失败:",n))}},S=()=>{var n;(n=p.value)==null||n.resetFields()};return w(()=>{T()}),(n,t)=>{const b=s("el-input"),u=s("el-form-item"),m=s("el-col"),c=s("el-row"),r=s("el-option"),i=s("el-select"),C=s("el-form"),g=s("el-button");return U(),x("div",F,[e(C,{ref_key:"formRef",ref:p,model:o,rules:M,"label-width":"120px",size:"default"},{default:l(()=>[e(c,{gutter:20},{default:l(()=>[e(m,{span:12},{default:l(()=>[e(u,{label:"BOM编码",prop:"bomCode"},{default:l(()=>[e(b,{modelValue:o.bomCode,"onUpdate:modelValue":t[0]||(t[0]=a=>o.bomCode=a),placeholder:"请输入BOM编码",disabled:!O.value},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(u,{label:"BOM名称",prop:"bomName"},{default:l(()=>[e(b,{modelValue:o.bomName,"onUpdate:modelValue":t[1]||(t[1]=a=>o.bomName=a),placeholder:"请输入BOM名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{gutter:20},{default:l(()=>[e(m,{span:12},{default:l(()=>[e(u,{label:"BOM类型",prop:"bomType"},{default:l(()=>[e(i,{modelValue:o.bomType,"onUpdate:modelValue":t[2]||(t[2]=a=>o.bomType=a),placeholder:"请选择BOM类型"},{default:l(()=>[e(r,{label:"模板",value:"template"}),e(r,{label:"实例",value:"instance"}),e(r,{label:"版本",value:"version"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(u,{label:"验证策略",prop:"validationStrategy"},{default:l(()=>[e(i,{modelValue:o.validationStrategy,"onUpdate:modelValue":t[3]||(t[3]=a=>o.validationStrategy=a),placeholder:"请选择验证策略"},{default:l(()=>[e(r,{label:"严格验证",value:"strict"}),e(r,{label:"警告验证",value:"warning"}),e(r,{label:"无验证",value:"none"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{gutter:20},{default:l(()=>[e(m,{span:12},{default:l(()=>[e(u,{label:"规则引擎类型",prop:"ruleEngineType"},{default:l(()=>[e(i,{modelValue:o.ruleEngineType,"onUpdate:modelValue":t[4]||(t[4]=a=>o.ruleEngineType=a),placeholder:"请选择规则引擎类型"},{default:l(()=>[e(r,{label:"内置规则引擎",value:"built-in"}),e(r,{label:"Drools规则引擎",value:"drools"}),e(r,{label:"自定义规则引擎",value:"custom"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(u,{label:"状态",prop:"status"},{default:l(()=>[e(i,{modelValue:o.status,"onUpdate:modelValue":t[5]||(t[5]=a=>o.status=a),placeholder:"请选择状态"},{default:l(()=>[e(r,{label:"启用",value:"enabled"}),e(r,{label:"禁用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{label:"描述",prop:"description"},{default:l(()=>[e(b,{modelValue:o.description,"onUpdate:modelValue":t[6]||(t[6]=a=>o.description=a),type:"textarea",placeholder:"请输入BOM描述",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),k("div",R,[e(g,{type:"primary",onClick:N},{default:l(()=>t[7]||(t[7]=[y("保存")])),_:1,__:[7]}),e(g,{onClick:S},{default:l(()=>t[8]||(t[8]=[y("重置")])),_:1,__:[8]})])])}}},z=E($,[["__scopeId","data-v-cbb1df6a"]]);export{z as default};
