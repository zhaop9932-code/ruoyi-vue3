import{_ as q,g as F,i as I,a as u,c as P,o as v,e as p,b as e,w as l,f as s,m as V,q as g,t as T,E as B}from"./index-a6CENfl-.js";const N={class:"bom-advanced-settings"},R={class:"management-header"},$={__name:"BomAdvancedSettings",props:{bomId:{type:[String,Number],required:!0}},setup(j){const t=F({versionControl:{enabled:!0,namingRule:"major.minor.patch",maxVersions:10,autoCreateVersion:!0,customFormat:""},approval:{enabled:!1,levels:1,autoTrigger:!0,timeoutDays:3,approvers:[{userId:"1",role:"pm"}]},notification:{enabled:!0,events:["BOM创建","BOM修改","BOM审批"],methods:["邮件","系统消息"],recipients:["1","2"]},integration:{erpEnabled:!0,mesEnabled:!1,plmEnabled:!0,autoSync:!0,syncFrequency:"hourly"},accessControl:{enabled:!0,permissions:[{role:"admin",canEdit:!0,canApprove:!0,canDelete:!0},{role:"editor",canEdit:!0,canApprove:!1,canDelete:!1},{role:"viewer",canEdit:!1,canApprove:!1,canDelete:!1}]}}),M=async()=>{try{setTimeout(()=>{B.success("高级设置保存成功")},500)}catch(c){B.error("保存失败，请检查设置数据"),console.error("保存高级设置失败:",c)}},D=()=>{t.approval.approvers.push({userId:"",role:""})},O=c=>{t.approval.approvers.splice(c,1)},A=()=>{t.accessControl.permissions.push({role:"",canEdit:!1,canApprove:!1,canDelete:!1})},S=c=>{t.accessControl.permissions.splice(c,1)};return I(()=>{setTimeout(()=>{console.log("高级设置数据加载完成")},500)}),(c,a)=>{const w=u("el-button"),i=u("el-switch"),d=u("el-form-item"),r=u("el-col"),n=u("el-option"),y=u("el-select"),b=u("el-row"),x=u("el-input-number"),z=u("el-input"),C=u("el-form"),U=u("el-card"),f=u("el-table-column"),k=u("el-table"),_=u("el-checkbox"),E=u("el-checkbox-group");return v(),P("div",N,[p("div",R,[a[20]||(a[20]=p("h3",null,"高级设置",-1)),e(w,{type:"primary",icon:"Check",onClick:M},{default:l(()=>a[19]||(a[19]=[s("保存设置")])),_:1,__:[19]})]),e(U,{shadow:"never",class:"setting-card"},{header:l(()=>a[21]||(a[21]=[p("div",{class:"card-header"},[p("h4",null,"版本控制设置")],-1)])),default:l(()=>[e(C,{model:t.versionControl,"label-width":"150px",size:"default"},{default:l(()=>[e(b,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(d,{label:"启用版本控制"},{default:l(()=>[e(i,{modelValue:t.versionControl.enabled,"onUpdate:modelValue":a[0]||(a[0]=o=>t.versionControl.enabled=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(d,{label:"版本命名规则"},{default:l(()=>[e(y,{modelValue:t.versionControl.namingRule,"onUpdate:modelValue":a[1]||(a[1]=o=>t.versionControl.namingRule=o),placeholder:"请选择版本命名规则"},{default:l(()=>[e(n,{label:"主版本.次版本",value:"major.minor"}),e(n,{label:"主版本.次版本.修订版",value:"major.minor.patch"}),e(n,{label:"日期格式",value:"date"}),e(n,{label:"自定义",value:"custom"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(d,{label:"最大版本数量"},{default:l(()=>[e(x,{modelValue:t.versionControl.maxVersions,"onUpdate:modelValue":a[2]||(a[2]=o=>t.versionControl.maxVersions=o),min:1,max:100,step:1,placeholder:"请输入最大版本数量"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(d,{label:"自动创建版本"},{default:l(()=>[e(i,{modelValue:t.versionControl.autoCreateVersion,"onUpdate:modelValue":a[3]||(a[3]=o=>t.versionControl.autoCreateVersion=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t.versionControl.namingRule==="custom"?(v(),V(d,{key:0,label:"自定义版本格式"},{default:l(()=>[e(z,{modelValue:t.versionControl.customFormat,"onUpdate:modelValue":a[4]||(a[4]=o=>t.versionControl.customFormat=o),placeholder:"请输入自定义版本格式"},null,8,["modelValue"]),a[22]||(a[22]=p("div",{class:"form-tip"},"示例：V{major}.{minor}.{patch} 或 {year}-{month}-{day}",-1))]),_:1,__:[22]})):g("",!0)]),_:1},8,["model"])]),_:1}),e(U,{shadow:"never",class:"setting-card"},{header:l(()=>a[23]||(a[23]=[p("div",{class:"card-header"},[p("h4",null,"审批流程设置")],-1)])),default:l(()=>[e(C,{model:t.approval,"label-width":"150px",size:"default"},{default:l(()=>[e(b,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(d,{label:"启用审批流程"},{default:l(()=>[e(i,{modelValue:t.approval.enabled,"onUpdate:modelValue":a[5]||(a[5]=o=>t.approval.enabled=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(d,{label:"审批层级"},{default:l(()=>[e(x,{modelValue:t.approval.levels,"onUpdate:modelValue":a[6]||(a[6]=o=>t.approval.levels=o),min:1,max:5,step:1,placeholder:"请输入审批层级"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(d,{label:"自动触发审批"},{default:l(()=>[e(i,{modelValue:t.approval.autoTrigger,"onUpdate:modelValue":a[7]||(a[7]=o=>t.approval.autoTrigger=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(d,{label:"审批超时时间（天）"},{default:l(()=>[e(x,{modelValue:t.approval.timeoutDays,"onUpdate:modelValue":a[8]||(a[8]=o=>t.approval.timeoutDays=o),min:1,max:30,step:1,placeholder:"请输入超时时间"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t.approval.enabled?(v(),V(d,{key:0,label:"审批人设置"},{default:l(()=>[e(k,{data:t.approval.approvers,border:"",style:{width:"100%"}},{default:l(()=>[e(f,{label:"审批层级",width:"100",align:"center"},{default:l(o=>[s(T(o.$index+1),1)]),_:1}),e(f,{label:"审批人","min-width":"150"},{default:l(o=>[e(y,{modelValue:o.row.userId,"onUpdate:modelValue":m=>o.row.userId=m,placeholder:"请选择审批人"},{default:l(()=>[e(n,{label:"张三",value:"1"}),e(n,{label:"李四",value:"2"}),e(n,{label:"王五",value:"3"}),e(n,{label:"赵六",value:"4"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(f,{label:"角色","min-width":"150"},{default:l(o=>[e(y,{modelValue:o.row.role,"onUpdate:modelValue":m=>o.row.role=m,placeholder:"请选择角色"},{default:l(()=>[e(n,{label:"项目经理",value:"pm"}),e(n,{label:"工程师",value:"engineer"}),e(n,{label:"质量经理",value:"quality"}),e(n,{label:"财务经理",value:"finance"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(f,{label:"操作",width:"100",align:"center"},{default:l(o=>[e(w,{size:"small",type:"danger",icon:"Delete",onClick:m=>O(o.$index)},{default:l(()=>a[24]||(a[24]=[s(" 删除 ")])),_:2,__:[24]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(w,{type:"primary",icon:"Plus",size:"small",onClick:D,style:{"margin-top":"10px"}},{default:l(()=>a[25]||(a[25]=[s(" 新增审批人 ")])),_:1,__:[25]})]),_:1})):g("",!0)]),_:1},8,["model"])]),_:1}),e(U,{shadow:"never",class:"setting-card"},{header:l(()=>a[26]||(a[26]=[p("div",{class:"card-header"},[p("h4",null,"通知设置")],-1)])),default:l(()=>[e(C,{model:t.notification,"label-width":"150px",size:"default"},{default:l(()=>[e(b,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(d,{label:"启用通知"},{default:l(()=>[e(i,{modelValue:t.notification.enabled,"onUpdate:modelValue":a[9]||(a[9]=o=>t.notification.enabled=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t.notification.enabled?(v(),V(d,{key:0,label:"通知事件"},{default:l(()=>[e(E,{modelValue:t.notification.events,"onUpdate:modelValue":a[10]||(a[10]=o=>t.notification.events=o)},{default:l(()=>[e(_,{label:"BOM创建"},{default:l(()=>a[27]||(a[27]=[s("BOM创建")])),_:1,__:[27]}),e(_,{label:"BOM修改"},{default:l(()=>a[28]||(a[28]=[s("BOM修改")])),_:1,__:[28]}),e(_,{label:"BOM审批"},{default:l(()=>a[29]||(a[29]=[s("BOM审批")])),_:1,__:[29]}),e(_,{label:"BOM版本变更"},{default:l(()=>a[30]||(a[30]=[s("BOM版本变更")])),_:1,__:[30]}),e(_,{label:"BOM删除"},{default:l(()=>a[31]||(a[31]=[s("BOM删除")])),_:1,__:[31]})]),_:1},8,["modelValue"])]),_:1})):g("",!0),t.notification.enabled?(v(),V(d,{key:1,label:"通知方式"},{default:l(()=>[e(E,{modelValue:t.notification.methods,"onUpdate:modelValue":a[11]||(a[11]=o=>t.notification.methods=o)},{default:l(()=>[e(_,{label:"邮件"},{default:l(()=>a[32]||(a[32]=[s("邮件")])),_:1,__:[32]}),e(_,{label:"短信"},{default:l(()=>a[33]||(a[33]=[s("短信")])),_:1,__:[33]}),e(_,{label:"系统消息"},{default:l(()=>a[34]||(a[34]=[s("系统消息")])),_:1,__:[34]})]),_:1},8,["modelValue"])]),_:1})):g("",!0),t.notification.enabled?(v(),V(d,{key:2,label:"通知接收人"},{default:l(()=>[e(y,{modelValue:t.notification.recipients,"onUpdate:modelValue":a[12]||(a[12]=o=>t.notification.recipients=o),multiple:"",placeholder:"请选择通知接收人"},{default:l(()=>[e(n,{label:"张三",value:"1"}),e(n,{label:"李四",value:"2"}),e(n,{label:"王五",value:"3"}),e(n,{label:"赵六",value:"4"})]),_:1},8,["modelValue"])]),_:1})):g("",!0)]),_:1},8,["model"])]),_:1}),e(U,{shadow:"never",class:"setting-card"},{header:l(()=>a[35]||(a[35]=[p("div",{class:"card-header"},[p("h4",null,"集成设置")],-1)])),default:l(()=>[e(C,{model:t.integration,"label-width":"150px",size:"default"},{default:l(()=>[e(b,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(d,{label:"启用ERP集成"},{default:l(()=>[e(i,{modelValue:t.integration.erpEnabled,"onUpdate:modelValue":a[13]||(a[13]=o=>t.integration.erpEnabled=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(d,{label:"启用MES集成"},{default:l(()=>[e(i,{modelValue:t.integration.mesEnabled,"onUpdate:modelValue":a[14]||(a[14]=o=>t.integration.mesEnabled=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(d,{label:"启用PLM集成"},{default:l(()=>[e(i,{modelValue:t.integration.plmEnabled,"onUpdate:modelValue":a[15]||(a[15]=o=>t.integration.plmEnabled=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(d,{label:"自动同步"},{default:l(()=>[e(i,{modelValue:t.integration.autoSync,"onUpdate:modelValue":a[16]||(a[16]=o=>t.integration.autoSync=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t.integration.autoSync?(v(),V(d,{key:0,label:"同步频率"},{default:l(()=>[e(y,{modelValue:t.integration.syncFrequency,"onUpdate:modelValue":a[17]||(a[17]=o=>t.integration.syncFrequency=o),placeholder:"请选择同步频率"},{default:l(()=>[e(n,{label:"实时同步",value:"realtime"}),e(n,{label:"每小时",value:"hourly"}),e(n,{label:"每天",value:"daily"}),e(n,{label:"每周",value:"weekly"})]),_:1},8,["modelValue"])]),_:1})):g("",!0)]),_:1},8,["model"])]),_:1}),e(U,{shadow:"never",class:"setting-card"},{header:l(()=>a[36]||(a[36]=[p("div",{class:"card-header"},[p("h4",null,"访问控制")],-1)])),default:l(()=>[e(C,{model:t.accessControl,"label-width":"150px",size:"default"},{default:l(()=>[e(b,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[e(d,{label:"启用访问控制"},{default:l(()=>[e(i,{modelValue:t.accessControl.enabled,"onUpdate:modelValue":a[18]||(a[18]=o=>t.accessControl.enabled=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t.accessControl.enabled?(v(),V(d,{key:0,label:"权限设置"},{default:l(()=>[e(k,{data:t.accessControl.permissions,border:"",style:{width:"100%"}},{default:l(()=>[e(f,{label:"角色","min-width":"150"},{default:l(o=>[e(y,{modelValue:o.row.role,"onUpdate:modelValue":m=>o.row.role=m,placeholder:"请选择角色"},{default:l(()=>[e(n,{label:"管理员",value:"admin"}),e(n,{label:"编辑",value:"editor"}),e(n,{label:"查看",value:"viewer"}),e(n,{label:"审批人",value:"approver"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(f,{label:"可编辑",width:"100",align:"center"},{default:l(o=>[e(i,{modelValue:o.row.canEdit,"onUpdate:modelValue":m=>o.row.canEdit=m},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(f,{label:"可审批",width:"100",align:"center"},{default:l(o=>[e(i,{modelValue:o.row.canApprove,"onUpdate:modelValue":m=>o.row.canApprove=m},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(f,{label:"可删除",width:"100",align:"center"},{default:l(o=>[e(i,{modelValue:o.row.canDelete,"onUpdate:modelValue":m=>o.row.canDelete=m},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(f,{label:"操作",width:"100",align:"center"},{default:l(o=>[e(w,{size:"small",type:"danger",icon:"Delete",onClick:m=>S(o.$index)},{default:l(()=>a[37]||(a[37]=[s(" 删除 ")])),_:2,__:[37]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(w,{type:"primary",icon:"Plus",size:"small",onClick:A,style:{"margin-top":"10px"}},{default:l(()=>a[38]||(a[38]=[s(" 新增权限 ")])),_:1,__:[38]})]),_:1})):g("",!0)]),_:1},8,["model"])]),_:1})])}}},G=q($,[["__scopeId","data-v-5f349bcc"]]);export{G as default};
