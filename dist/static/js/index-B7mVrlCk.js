import{aV as sl,r as b,g as Q,H as ce,h as Re,aW as Ae,m as x,aX as ee,o as h,a4 as il,aY as se,T as Ke,c as le,aZ as ul,aq as rl,l as i,a_ as dl,ad as Me,d as pl,u as ml,a$ as vl,$ as De,aE as cl,aG as fl,a as g,i as Ee,b as a,w as s,e as A,aF as we,j as E,U as Oe,F as me,n as ve,f as U,a0 as Le,k as T,t as Fe}from"./index-DgigFOm-.js";import{d as hl,l as _l,a as Be,b as gl,c as xl,r as bl,e as yl,f as zl}from"./user-Df3mNi2X.js";const wl={__name:"splitpanes",props:{horizontal:{type:Boolean,default:!1},pushOtherPanes:{type:Boolean,default:!0},maximizePanes:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean,default:!1}},emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click","splitter-dblclick"],setup(fe,{emit:te}){const O=te,v=fe,Z=sl(),m=b([]),K=Q(()=>m.value.reduce((e,t)=>(e[~~t.id]=t)&&e,{})),k=Q(()=>m.value.length),P=b(null),D=b(!1),y=b({mouseDown:!1,dragging:!1,activeSplitter:null,cursorOffset:0}),R=b({splitter:null,timeoutId:null}),J=Q(()=>({[`splitpanes splitpanes--${v.horizontal?"horizontal":"vertical"}`]:!0,"splitpanes--dragging":y.value.dragging})),Y=()=>{document.addEventListener("mousemove",_,{passive:!1}),document.addEventListener("mouseup",F),"ontouchstart"in window&&(document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("touchend",F))},j=()=>{document.removeEventListener("mousemove",_,{passive:!1}),document.removeEventListener("mouseup",F),"ontouchstart"in window&&(document.removeEventListener("touchmove",_,{passive:!1}),document.removeEventListener("touchend",F))},L=(e,t)=>{const r=e.target.closest(".splitpanes__splitter");if(r){const{left:n,top:u}=r.getBoundingClientRect(),{clientX:p,clientY:f}="ontouchstart"in window&&e.touches?e.touches[0]:e;y.value.cursorOffset=v.horizontal?f-u:p-n}Y(),y.value.mouseDown=!0,y.value.activeSplitter=t},_=e=>{y.value.mouseDown&&(e.preventDefault(),y.value.dragging=!0,requestAnimationFrame(()=>{B(re(e)),$("resize",{event:e},!0)}))},F=e=>{y.value.dragging&&(window.getSelection().removeAllRanges(),$("resized",{event:e},!0)),y.value.mouseDown=!1,y.value.activeSplitter=null,setTimeout(()=>{y.value.dragging=!1,j()},100)},ae=(e,t)=>{"ontouchstart"in window&&(e.preventDefault(),R.value.splitter===t?(clearTimeout(R.value.timeoutId),R.value.timeoutId=null,ie(e,t),R.value.splitter=null):(R.value.splitter=t,R.value.timeoutId=setTimeout(()=>R.value.splitter=null,500))),y.value.dragging||$("splitter-click",{event:e,index:t},!0)},ie=(e,t)=>{if($("splitter-dblclick",{event:e,index:t},!0),v.maximizePanes){let r=0;m.value=m.value.map((n,u)=>(n.size=u===t?n.max:n.min,u!==t&&(r+=n.min),n)),m.value[t].size-=r,$("pane-maximize",{event:e,index:t,pane:m.value[t]}),$("resized",{event:e,index:t},!0)}},ue=(e,t)=>{$("pane-click",{event:e,index:K.value[t].index,pane:K.value[t]})},re=e=>{const t=P.value.getBoundingClientRect(),{clientX:r,clientY:n}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:r-(v.horizontal?0:y.value.cursorOffset)-t.left,y:n-(v.horizontal?y.value.cursorOffset:0)-t.top}},z=e=>{e=e[v.horizontal?"y":"x"];const t=P.value[v.horizontal?"clientHeight":"clientWidth"];return v.rtl&&!v.horizontal&&(e=t-e),e*100/t},B=e=>{const t=y.value.activeSplitter;let r={prevPanesSize:w(t),nextPanesSize:c(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const n=0+(v.pushOtherPanes?0:r.prevPanesSize),u=100-(v.pushOtherPanes?0:r.nextPanesSize),p=Math.max(Math.min(z(e),u),n);let f=[t,t+1],N=m.value[f[0]]||null,M=m.value[f[1]]||null;const xe=N.max<100&&p>=N.max+r.prevPanesSize,d=M.max<100&&p<=100-(M.max+c(t+1));if(xe||d){xe?(N.size=N.max,M.size=Math.max(100-N.max-r.prevPanesSize-r.nextPanesSize,0)):(N.size=Math.max(100-M.max-r.prevPanesSize-c(t+1),0),M.size=M.max);return}if(v.pushOtherPanes){const l=ke(r,p);if(!l)return;({sums:r,panesToResize:f}=l),N=m.value[f[0]]||null,M=m.value[f[1]]||null}N!==null&&(N.size=Math.min(Math.max(p-r.prevPanesSize-r.prevReachedMinPanes,N.min),N.max)),M!==null&&(M.size=Math.min(Math.max(100-p-r.nextPanesSize-r.nextReachedMinPanes,M.min),M.max))},ke=(e,t)=>{const r=y.value.activeSplitter,n=[r,r+1];return t<e.prevPanesSize+m.value[n[0]].min&&(n[0]=Se(r).index,e.prevReachedMinPanes=0,n[0]<r&&m.value.forEach((u,p)=>{p>n[0]&&p<=r&&(u.size=u.min,e.prevReachedMinPanes+=u.min)}),e.prevPanesSize=w(n[0]),n[0]===void 0)?(e.prevReachedMinPanes=0,m.value[0].size=m.value[0].min,m.value.forEach((u,p)=>{p>0&&p<=r&&(u.size=u.min,e.prevReachedMinPanes+=u.min)}),m.value[n[1]].size=100-e.prevReachedMinPanes-m.value[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-m.value[n[1]].min&&(n[1]=Ve(r).index,e.nextReachedMinPanes=0,n[1]>r+1&&m.value.forEach((u,p)=>{p>r&&p<n[1]&&(u.size=u.min,e.nextReachedMinPanes+=u.min)}),e.nextPanesSize=c(n[1]-1),n[1]===void 0)?(e.nextReachedMinPanes=0,m.value.forEach((u,p)=>{p<k.value-1&&p>=r+1&&(u.size=u.min,e.nextReachedMinPanes+=u.min)}),m.value[n[0]].size=100-e.prevPanesSize-c(n[0]-1),null):{sums:e,panesToResize:n}},w=e=>m.value.reduce((t,r,n)=>t+(n<e?r.size:0),0),c=e=>m.value.reduce((t,r,n)=>t+(n>e+1?r.size:0),0),Se=e=>[...m.value].reverse().find(t=>t.index<e&&t.size>t.min)||{},Ve=e=>m.value.find(t=>t.index>e+1&&t.size>t.min)||{},q=()=>{var e;const t=Array.from(((e=P.value)==null?void 0:e.children)||[]);for(const r of t){const n=r.classList.contains("splitpanes__pane"),u=r.classList.contains("splitpanes__splitter");!n&&!u&&(r.remove(),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))}},he=(e,t,r=!1)=>{const n=e-1,u=document.createElement("div");u.classList.add("splitpanes__splitter"),r||(u.onmousedown=p=>L(p,n),typeof window<"u"&&"ontouchstart"in window&&(u.ontouchstart=p=>L(p,n)),u.onclick=p=>ae(p,n+1)),u.ondblclick=p=>ie(p,n+1),t.parentNode.insertBefore(u,t)},_e=e=>{e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.remove()},ne=()=>{var e;const t=Array.from(((e=P.value)==null?void 0:e.children)||[]);for(const n of t)n.className.includes("splitpanes__splitter")&&_e(n);let r=0;for(const n of t)n.className.includes("splitpanes__pane")&&(!r&&v.firstSplitter?he(r,n,!0):r&&he(r,n),r++)},G=({uid:e,...t})=>{const r=K.value[e];for(const[n,u]of Object.entries(t))r[n]=u},Pe=e=>{var t;let r=-1;Array.from(((t=P.value)==null?void 0:t.children)||[]).some(n=>(n.className.includes("splitpanes__pane")&&r++,n.isSameNode(e.el))),m.value.splice(r,0,{...e,index:r}),m.value.forEach((n,u)=>n.index=u),D.value&&Me(()=>{ne(),de({addedPane:m.value[r]}),$("pane-add",{pane:m.value[r]})})},ge=e=>{const t=m.value.findIndex(n=>n.id===e);m.value[t].el=null;const r=m.value.splice(t,1)[0];m.value.forEach((n,u)=>n.index=u),Me(()=>{ne(),$("pane-remove",{pane:r}),de({removedPane:{...r}})})},de=(e={})=>{!e.addedPane&&!e.removedPane?Ie():m.value.some(t=>t.givenSize!==null||t.min||t.max<100)?Ce(e):Ne(),D.value&&$("resized")},Ne=()=>{const e=100/k.value;let t=0;const r=[],n=[];for(const u of m.value)u.size=Math.max(Math.min(e,u.max),u.min),t-=u.size,u.size>=u.max&&r.push(u.id),u.size<=u.min&&n.push(u.id);t>.1&&pe(t,r,n)},Ie=()=>{let e=100;const t=[],r=[];let n=0;for(const p of m.value)e-=p.size,p.givenSize!==null&&n++,p.size>=p.max&&t.push(p.id),p.size<=p.min&&r.push(p.id);let u=100;if(e>.1){for(const p of m.value)p.givenSize===null&&(p.size=Math.max(Math.min(e/(k.value-n),p.max),p.min)),u-=p.size;u>.1&&pe(u,t,r)}},Ce=({addedPane:e,removedPane:t}={})=>{let r=100/k.value,n=0;const u=[],p=[];((e==null?void 0:e.givenSize)??null)!==null&&(r=(100-e.givenSize)/(k.value-1));for(const f of m.value)n-=f.size,f.size>=f.max&&u.push(f.id),f.size<=f.min&&p.push(f.id);if(!(Math.abs(n)<.1)){for(const f of m.value)(e==null?void 0:e.givenSize)!==null&&(e==null?void 0:e.id)===f.id||(f.size=Math.max(Math.min(r,f.max),f.min)),n-=f.size,f.size>=f.max&&u.push(f.id),f.size<=f.min&&p.push(f.id);n>.1&&pe(n,u,p)}},pe=(e,t,r)=>{let n;e>0?n=e/(k.value-t.length):n=e/(k.value-r.length),m.value.forEach((u,p)=>{if(e>0&&!t.includes(u.id)){const f=Math.max(Math.min(u.size+n,u.max),u.min),N=f-u.size;e-=N,u.size=f}else if(!r.includes(u.id)){const f=Math.max(Math.min(u.size+n,u.max),u.min),N=f-u.size;e-=N,u.size=f}}),Math.abs(e)>.1&&Me(()=>{D.value&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})},$=(e,t=void 0,r=!1)=>{const n=(t==null?void 0:t.index)??y.value.activeSplitter??null;O(e,{...t,...n!==null&&{index:n},...r&&n!==null&&{prevPane:m.value[n-(v.firstSplitter?1:0)],nextPane:m.value[n+(v.firstSplitter?0:1)]},panes:m.value.map(u=>({min:u.min,max:u.max,size:u.size}))})};ce(()=>v.firstSplitter,()=>ne()),Re(()=>{q(),ne(),de(),$("ready"),D.value=!0}),Ae(()=>D.value=!1);const Ue=()=>{var e;return dl("div",{ref:P,class:J.value},(e=Z.default)==null?void 0:e.call(Z))};return ee("panes",m),ee("indexedPanes",K),ee("horizontal",Q(()=>v.horizontal)),ee("requestUpdate",G),ee("onPaneAdd",Pe),ee("onPaneRemove",ge),ee("onPaneClick",ue),(e,t)=>(h(),x(il(Ue)))}},qe={__name:"pane",props:{size:{type:[Number,String]},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},setup(fe){var te;const O=fe,v=se("requestUpdate"),Z=se("onPaneAdd"),m=se("horizontal"),K=se("onPaneRemove"),k=se("onPaneClick"),P=(te=Ke())==null?void 0:te.uid,D=se("indexedPanes"),y=Q(()=>D.value[P]),R=b(null),J=Q(()=>{const _=isNaN(O.size)||O.size===void 0?0:parseFloat(O.size);return Math.max(Math.min(_,j.value),Y.value)}),Y=Q(()=>{const _=parseFloat(O.minSize);return isNaN(_)?0:_}),j=Q(()=>{const _=parseFloat(O.maxSize);return isNaN(_)?100:_}),L=Q(()=>{var _;return`${m.value?"height":"width"}: ${(_=y.value)==null?void 0:_.size}%`});return ce(()=>J.value,_=>v({uid:P,size:_})),ce(()=>Y.value,_=>v({uid:P,min:_})),ce(()=>j.value,_=>v({uid:P,max:_})),Re(()=>{Z({id:P,el:R.value,min:Y.value,max:j.value,givenSize:O.size===void 0?null:J.value,size:J.value})}),Ae(()=>K(P)),(_,F)=>(h(),le("div",{ref_key:"paneEl",ref:R,class:"splitpanes__pane",onClick:F[0]||(F[0]=ae=>i(k)(ae,_._.uid)),style:rl(L.value)},[ul(_.$slots,"default")],4))}},kl={class:"app-container"},Sl={class:"head-container"},Vl={class:"head-container"},Pl={class:"dialog-footer"},Nl={class:"el-upload__tip text-center"},Il={class:"el-upload__tip"},Cl={class:"dialog-footer"},Ul=pl({name:"User"}),$l=Object.assign(Ul,{setup(fe){const te=ml(),O=vl(),{proxy:v}=Ke(),{sys_normal_disable:Z,sys_user_sex:m}=v.useDict("sys_normal_disable","sys_user_sex"),K=b([]),k=b(!1),P=b(!0),D=b(!0),y=b([]),R=b(!0),J=b(!0),Y=b(0),j=b(""),L=b([]),_=b(""),F=b(void 0),ae=b(void 0),ie=b(void 0),ue=b([]),re=b([]),z=De({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+cl()},url:"/prod-api/system/user/importData"}),B=b({userId:{label:"用户编号",visible:!0},userName:{label:"用户名称",visible:!0},nickName:{label:"用户昵称",visible:!0},deptName:{label:"部门",visible:!0},phonenumber:{label:"手机号码",visible:!0},status:{label:"状态",visible:!0},createTime:{label:"创建时间",visible:!0}}),ke=De({form:{},queryParams:{pageNum:1,pageSize:10,userName:void 0,phonenumber:void 0,status:void 0,deptId:void 0},rules:{userName:[{required:!0,message:"用户名称不能为空",trigger:"blur"},{min:2,max:20,message:"用户名称长度必须介于 2 和 20 之间",trigger:"blur"}],nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：< > " ' \\ |`,trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phonenumber:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}),{queryParams:w,form:c,rules:Se}=fl(ke),Ve=(d,l)=>d?l.label.indexOf(d)!==-1:!0;ce(_,d=>{v.$refs.deptTreeRef.filter(d)});function q(){P.value=!0,_l(v.addDateRange(w.value,L.value)).then(d=>{P.value=!1,K.value=d.rows,Y.value=d.total})}function he(){hl().then(d=>{F.value=d.data,ae.value=_e(JSON.parse(JSON.stringify(d.data)))})}function _e(d){return d.filter(l=>l.disabled?!1:(l.children&&l.children.length&&(l.children=_e(l.children)),!0))}function ne(d){w.value.deptId=d.id,G()}function G(){w.value.pageNum=1,q()}function Pe(){L.value=[],v.resetForm("queryRef"),w.value.deptId=void 0,v.$refs.deptTreeRef.setCurrentKey(null),G()}function ge(d){const l=d.userId||y.value;v.$modal.confirm('是否确认删除用户编号为"'+l+'"的数据项？').then(function(){return gl(l)}).then(()=>{q(),v.$modal.msgSuccess("删除成功")}).catch(()=>{})}function de(){v.download("system/user/export",{...w.value},`user_${new Date().getTime()}.xlsx`)}function Ne(d){let l=d.status==="0"?"启用":"停用";v.$modal.confirm('确认要"'+l+'""'+d.userName+'"用户吗?').then(function(){return xl(d.userId,d.status)}).then(()=>{v.$modal.msgSuccess(l+"成功")}).catch(function(){d.status=d.status==="0"?"1":"0"})}function Ie(d){const l=d.userId;te.push("/system/user-auth/role/"+l)}function Ce(d){v.$prompt('请输入"'+d.userName+'"的新密码',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,inputPattern:/^.{5,20}$/,inputErrorMessage:"用户密码长度必须介于 5 和 20 之间",inputValidator:l=>{if(/<|>|"|'|\||\\/.test(l))return`不能包含非法字符：< > " ' \\ |`}}).then(({value:l})=>{bl(d.userId,l).then(S=>{v.$modal.msgSuccess("修改成功，新密码是："+l)})}).catch(()=>{})}function pe(d){y.value=d.map(l=>l.userId),R.value=d.length!=1,J.value=!d.length}function $(){z.title="用户导入",z.open=!0,z.selectedFile=null}function Ue(){v.download("system/user/importTemplate",{},`user_template_${new Date().getTime()}.xlsx`)}const e=(d,l,S)=>{z.isUploading=!0},t=(d,l)=>{z.selectedFile=d},r=(d,l)=>{z.selectedFile=null},n=(d,l,S)=>{z.open=!1,z.isUploading=!1,v.$refs.uploadRef.handleRemove(l),v.$alert("<div style='overflow: auto;overflow-x: hidden;max-height: 70vh;padding: 10px 20px 0;'>"+d.msg+"</div>","导入结果",{dangerouslyUseHTMLString:!0}),q()};function u(){const d=z.selectedFile;if(!d||d.length===0||!d.name.toLowerCase().endsWith(".xls")&&!d.name.toLowerCase().endsWith(".xlsx")){v.$modal.msgError("请选择后缀为 “xls”或“xlsx”的文件。");return}v.$refs.uploadRef.submit()}function p(){c.value={userId:void 0,deptId:void 0,userName:void 0,nickName:void 0,password:void 0,phonenumber:void 0,email:void 0,sex:void 0,status:"0",remark:void 0,postIds:[],roleIds:[]},v.resetForm("userRef")}function f(){k.value=!1,p()}function N(){p(),Be().then(d=>{ue.value=d.posts,re.value=d.roles,k.value=!0,j.value="添加用户",c.value.password=ie.value})}function M(d){p();const l=d.userId||y.value;Be(l).then(S=>{c.value=S.data,ue.value=S.posts,re.value=S.roles,c.value.postIds=S.postIds,c.value.roleIds=S.roleIds,k.value=!0,j.value="修改用户",c.password=""})}function xe(){v.$refs.userRef.validate(d=>{d&&(c.value.userId!=null?yl(c.value).then(l=>{v.$modal.msgSuccess("修改成功"),k.value=!1,q()}):zl(c.value).then(l=>{v.$modal.msgSuccess("新增成功"),k.value=!1,q()}))})}return Re(()=>{he(),q(),v.getConfigKey("sys.user.initPassword").then(d=>{ie.value=d.msg})}),(d,l)=>{const S=g("el-input"),Ye=g("el-tree"),V=g("el-col"),I=g("el-form-item"),be=g("el-option"),ye=g("el-select"),je=g("el-date-picker"),C=g("el-button"),$e=g("el-form"),We=g("right-toolbar"),X=g("el-row"),W=g("el-table-column"),He=g("el-switch"),ze=g("el-tooltip"),Qe=g("el-table"),Je=g("pagination"),Xe=g("el-tree-select"),Ze=g("el-radio"),Ge=g("el-radio-group"),Te=g("el-dialog"),el=g("upload-filled"),ll=g("el-icon"),tl=g("el-checkbox"),al=g("el-link"),nl=g("el-upload"),H=Ee("hasPermi"),ol=Ee("loading");return h(),le("div",kl,[a(X,{gutter:20},{default:s(()=>[a(i(wl),{horizontal:i(O).device==="mobile",class:"default-theme"},{default:s(()=>[a(i(qe),{size:"16"},{default:s(()=>[a(V,null,{default:s(()=>[A("div",Sl,[a(S,{modelValue:i(_),"onUpdate:modelValue":l[0]||(l[0]=o=>we(_)?_.value=o:null),placeholder:"请输入部门名称",clearable:"","prefix-icon":"Search",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),A("div",Vl,[a(Ye,{data:i(F),props:{label:"label",children:"children"},"expand-on-click-node":!1,"filter-node-method":Ve,ref:"deptTreeRef","node-key":"id","highlight-current":"","default-expand-all":"",onNodeClick:ne},null,8,["data"])])]),_:1})]),_:1}),a(i(qe),{size:"84"},{default:s(()=>[a(V,null,{default:s(()=>[E(a($e,{model:i(w),ref:"queryRef",inline:!0,"label-width":"68px"},{default:s(()=>[a(I,{label:"用户名称",prop:"userName"},{default:s(()=>[a(S,{modelValue:i(w).userName,"onUpdate:modelValue":l[1]||(l[1]=o=>i(w).userName=o),placeholder:"请输入用户名称",clearable:"",style:{width:"240px"},onKeyup:Oe(G,["enter"])},null,8,["modelValue"])]),_:1}),a(I,{label:"手机号码",prop:"phonenumber"},{default:s(()=>[a(S,{modelValue:i(w).phonenumber,"onUpdate:modelValue":l[2]||(l[2]=o=>i(w).phonenumber=o),placeholder:"请输入手机号码",clearable:"",style:{width:"240px"},onKeyup:Oe(G,["enter"])},null,8,["modelValue"])]),_:1}),a(I,{label:"状态",prop:"status"},{default:s(()=>[a(ye,{modelValue:i(w).status,"onUpdate:modelValue":l[3]||(l[3]=o=>i(w).status=o),placeholder:"用户状态",clearable:"",style:{width:"240px"}},{default:s(()=>[(h(!0),le(me,null,ve(i(Z),o=>(h(),x(be,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(I,{label:"创建时间",style:{width:"308px"}},{default:s(()=>[a(je,{modelValue:i(L),"onUpdate:modelValue":l[4]||(l[4]=o=>we(L)?L.value=o:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),a(I,null,{default:s(()=>[a(C,{type:"primary",icon:"Search",onClick:G},{default:s(()=>l[23]||(l[23]=[U("搜索")])),_:1,__:[23]}),a(C,{icon:"Refresh",onClick:Pe},{default:s(()=>l[24]||(l[24]=[U("重置")])),_:1,__:[24]})]),_:1})]),_:1},8,["model"]),[[Le,i(D)]]),a(X,{gutter:10,class:"mb8"},{default:s(()=>[a(V,{span:1.5},{default:s(()=>[E((h(),x(C,{type:"primary",plain:"",icon:"Plus",onClick:N},{default:s(()=>l[25]||(l[25]=[U("新增")])),_:1,__:[25]})),[[H,["system:user:add"]]])]),_:1}),a(V,{span:1.5},{default:s(()=>[E((h(),x(C,{type:"success",plain:"",icon:"Edit",disabled:i(R),onClick:M},{default:s(()=>l[26]||(l[26]=[U("修改")])),_:1,__:[26]},8,["disabled"])),[[H,["system:user:edit"]]])]),_:1}),a(V,{span:1.5},{default:s(()=>[E((h(),x(C,{type:"danger",plain:"",icon:"Delete",disabled:i(J),onClick:ge},{default:s(()=>l[27]||(l[27]=[U("删除")])),_:1,__:[27]},8,["disabled"])),[[H,["system:user:remove"]]])]),_:1}),a(V,{span:1.5},{default:s(()=>[E((h(),x(C,{type:"info",plain:"",icon:"Upload",onClick:$},{default:s(()=>l[28]||(l[28]=[U("导入")])),_:1,__:[28]})),[[H,["system:user:import"]]])]),_:1}),a(V,{span:1.5},{default:s(()=>[E((h(),x(C,{type:"warning",plain:"",icon:"Download",onClick:de},{default:s(()=>l[29]||(l[29]=[U("导出")])),_:1,__:[29]})),[[H,["system:user:export"]]])]),_:1}),a(We,{showSearch:i(D),"onUpdate:showSearch":l[5]||(l[5]=o=>we(D)?D.value=o:null),onQueryTable:q,columns:i(B)},null,8,["showSearch","columns"])]),_:1}),E((h(),x(Qe,{data:i(K),onSelectionChange:pe},{default:s(()=>[a(W,{type:"selection",width:"50",align:"center"}),i(B).userId.visible?(h(),x(W,{label:"用户编号",align:"center",key:"userId",prop:"userId"})):T("",!0),i(B).userName.visible?(h(),x(W,{label:"用户名称",align:"center",key:"userName",prop:"userName","show-overflow-tooltip":!0})):T("",!0),i(B).nickName.visible?(h(),x(W,{label:"用户昵称",align:"center",key:"nickName",prop:"nickName","show-overflow-tooltip":!0})):T("",!0),i(B).deptName.visible?(h(),x(W,{label:"部门",align:"center",key:"deptName",prop:"dept.deptName","show-overflow-tooltip":!0})):T("",!0),i(B).phonenumber.visible?(h(),x(W,{label:"手机号码",align:"center",key:"phonenumber",prop:"phonenumber",width:"120"})):T("",!0),i(B).status.visible?(h(),x(W,{label:"状态",align:"center",key:"status"},{default:s(o=>[a(He,{modelValue:o.row.status,"onUpdate:modelValue":oe=>o.row.status=oe,"active-value":"0","inactive-value":"1",onChange:oe=>Ne(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):T("",!0),i(B).createTime.visible?(h(),x(W,{key:6,label:"创建时间",align:"center",prop:"createTime",width:"160"},{default:s(o=>[A("span",null,Fe(d.parseTime(o.row.createTime)),1)]),_:1})):T("",!0),a(W,{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:s(o=>[o.row.userId!==1?(h(),x(ze,{key:0,content:"修改",placement:"top"},{default:s(()=>[E(a(C,{link:"",type:"primary",icon:"Edit",onClick:oe=>M(o.row)},null,8,["onClick"]),[[H,["system:user:edit"]]])]),_:2},1024)):T("",!0),o.row.userId!==1?(h(),x(ze,{key:1,content:"删除",placement:"top"},{default:s(()=>[E(a(C,{link:"",type:"primary",icon:"Delete",onClick:oe=>ge(o.row)},null,8,["onClick"]),[[H,["system:user:remove"]]])]),_:2},1024)):T("",!0),o.row.userId!==1?(h(),x(ze,{key:2,content:"重置密码",placement:"top"},{default:s(()=>[E(a(C,{link:"",type:"primary",icon:"Key",onClick:oe=>Ce(o.row)},null,8,["onClick"]),[[H,["system:user:resetPwd"]]])]),_:2},1024)):T("",!0),o.row.userId!==1?(h(),x(ze,{key:3,content:"分配角色",placement:"top"},{default:s(()=>[E(a(C,{link:"",type:"primary",icon:"CircleCheck",onClick:oe=>Ie(o.row)},null,8,["onClick"]),[[H,["system:user:edit"]]])]),_:2},1024)):T("",!0)]),_:1})]),_:1},8,["data"])),[[ol,i(P)]]),E(a(Je,{total:i(Y),page:i(w).pageNum,"onUpdate:page":l[6]||(l[6]=o=>i(w).pageNum=o),limit:i(w).pageSize,"onUpdate:limit":l[7]||(l[7]=o=>i(w).pageSize=o),onPagination:q},null,8,["total","page","limit"]),[[Le,i(Y)>0]])]),_:1})]),_:1})]),_:1},8,["horizontal"])]),_:1}),a(Te,{title:i(j),modelValue:i(k),"onUpdate:modelValue":l[19]||(l[19]=o=>we(k)?k.value=o:null),width:"600px","append-to-body":""},{footer:s(()=>[A("div",Pl,[a(C,{type:"primary",onClick:xe},{default:s(()=>l[30]||(l[30]=[U("确 定")])),_:1,__:[30]}),a(C,{onClick:f},{default:s(()=>l[31]||(l[31]=[U("取 消")])),_:1,__:[31]})])]),default:s(()=>[a($e,{model:i(c),rules:i(Se),ref:"userRef","label-width":"80px"},{default:s(()=>[a(X,null,{default:s(()=>[a(V,{span:12},{default:s(()=>[a(I,{label:"用户昵称",prop:"nickName"},{default:s(()=>[a(S,{modelValue:i(c).nickName,"onUpdate:modelValue":l[8]||(l[8]=o=>i(c).nickName=o),placeholder:"请输入用户昵称",maxlength:"30"},null,8,["modelValue"])]),_:1})]),_:1}),a(V,{span:12},{default:s(()=>[a(I,{label:"归属部门",prop:"deptId"},{default:s(()=>[a(Xe,{modelValue:i(c).deptId,"onUpdate:modelValue":l[9]||(l[9]=o=>i(c).deptId=o),data:i(ae),props:{value:"id",label:"label",children:"children"},"value-key":"id",placeholder:"请选择归属部门",clearable:"","check-strictly":""},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1}),a(X,null,{default:s(()=>[a(V,{span:12},{default:s(()=>[a(I,{label:"手机号码",prop:"phonenumber"},{default:s(()=>[a(S,{modelValue:i(c).phonenumber,"onUpdate:modelValue":l[10]||(l[10]=o=>i(c).phonenumber=o),placeholder:"请输入手机号码",maxlength:"11"},null,8,["modelValue"])]),_:1})]),_:1}),a(V,{span:12},{default:s(()=>[a(I,{label:"邮箱",prop:"email"},{default:s(()=>[a(S,{modelValue:i(c).email,"onUpdate:modelValue":l[11]||(l[11]=o=>i(c).email=o),placeholder:"请输入邮箱",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(X,null,{default:s(()=>[a(V,{span:12},{default:s(()=>[i(c).userId==null?(h(),x(I,{key:0,label:"用户名称",prop:"userName"},{default:s(()=>[a(S,{modelValue:i(c).userName,"onUpdate:modelValue":l[12]||(l[12]=o=>i(c).userName=o),placeholder:"请输入用户名称",maxlength:"30"},null,8,["modelValue"])]),_:1})):T("",!0)]),_:1}),a(V,{span:12},{default:s(()=>[i(c).userId==null?(h(),x(I,{key:0,label:"用户密码",prop:"password"},{default:s(()=>[a(S,{modelValue:i(c).password,"onUpdate:modelValue":l[13]||(l[13]=o=>i(c).password=o),placeholder:"请输入用户密码",type:"password",maxlength:"20","show-password":""},null,8,["modelValue"])]),_:1})):T("",!0)]),_:1})]),_:1}),a(X,null,{default:s(()=>[a(V,{span:12},{default:s(()=>[a(I,{label:"用户性别"},{default:s(()=>[a(ye,{modelValue:i(c).sex,"onUpdate:modelValue":l[14]||(l[14]=o=>i(c).sex=o),placeholder:"请选择"},{default:s(()=>[(h(!0),le(me,null,ve(i(m),o=>(h(),x(be,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(V,{span:12},{default:s(()=>[a(I,{label:"状态"},{default:s(()=>[a(Ge,{modelValue:i(c).status,"onUpdate:modelValue":l[15]||(l[15]=o=>i(c).status=o)},{default:s(()=>[(h(!0),le(me,null,ve(i(Z),o=>(h(),x(Ze,{key:o.value,value:o.value},{default:s(()=>[U(Fe(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(X,null,{default:s(()=>[a(V,{span:12},{default:s(()=>[a(I,{label:"岗位"},{default:s(()=>[a(ye,{modelValue:i(c).postIds,"onUpdate:modelValue":l[16]||(l[16]=o=>i(c).postIds=o),multiple:"",placeholder:"请选择"},{default:s(()=>[(h(!0),le(me,null,ve(i(ue),o=>(h(),x(be,{key:o.postId,label:o.postName,value:o.postId,disabled:o.status==1},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(V,{span:12},{default:s(()=>[a(I,{label:"角色"},{default:s(()=>[a(ye,{modelValue:i(c).roleIds,"onUpdate:modelValue":l[17]||(l[17]=o=>i(c).roleIds=o),multiple:"",placeholder:"请选择"},{default:s(()=>[(h(!0),le(me,null,ve(i(re),o=>(h(),x(be,{key:o.roleId,label:o.roleName,value:o.roleId,disabled:o.status==1},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(X,null,{default:s(()=>[a(V,{span:24},{default:s(()=>[a(I,{label:"备注"},{default:s(()=>[a(S,{modelValue:i(c).remark,"onUpdate:modelValue":l[18]||(l[18]=o=>i(c).remark=o),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),a(Te,{title:i(z).title,modelValue:i(z).open,"onUpdate:modelValue":l[22]||(l[22]=o=>i(z).open=o),width:"400px","append-to-body":""},{footer:s(()=>[A("div",Cl,[a(C,{type:"primary",onClick:u},{default:s(()=>l[36]||(l[36]=[U("确 定")])),_:1,__:[36]}),a(C,{onClick:l[21]||(l[21]=o=>i(z).open=!1)},{default:s(()=>l[37]||(l[37]=[U("取 消")])),_:1,__:[37]})])]),default:s(()=>[a(nl,{ref:"uploadRef",limit:1,accept:".xlsx, .xls",headers:i(z).headers,action:i(z).url+"?updateSupport="+i(z).updateSupport,disabled:i(z).isUploading,"on-progress":e,"on-success":n,"on-change":t,"on-remove":r,"auto-upload":!1,drag:""},{tip:s(()=>[A("div",Nl,[A("div",Il,[a(tl,{modelValue:i(z).updateSupport,"onUpdate:modelValue":l[20]||(l[20]=o=>i(z).updateSupport=o)},null,8,["modelValue"]),l[32]||(l[32]=U("是否更新已经存在的用户数据 "))]),l[34]||(l[34]=A("span",null,"仅允许导入xls、xlsx格式文件。",-1)),a(al,{type:"primary",underline:!1,style:{"font-size":"12px","vertical-align":"baseline"},onClick:Ue},{default:s(()=>l[33]||(l[33]=[U("下载模板")])),_:1,__:[33]})])]),default:s(()=>[a(ll,{class:"el-icon--upload"},{default:s(()=>[a(el)]),_:1}),l[35]||(l[35]=A("div",{class:"el-upload__text"},[U("将文件拖到此处，或"),A("em",null,"点击上传")],-1))]),_:1,__:[35]},8,["headers","action","disabled"])]),_:1},8,["title","modelValue"])])}}});export{$l as default};
