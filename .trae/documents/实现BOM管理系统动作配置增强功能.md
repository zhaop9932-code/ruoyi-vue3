# 实现BOM管理系统动作配置增强功能

## 1. 需求分析

根据用户提供的详细规范，需要实现完整的动作配置系统，包括：

* 5大类动作类型（基础动作、价格动作、消息通知、数据处理、兼容旧类型）

* 8种目标类型（变量信息、节点、节点静态属性等）

* 动态UI元素根据动作类型和目标类型变化

* 特定动作类型需要特殊处理（如设置变量需要计算配置器）

## 2. 实施步骤

### 步骤1：更新动作类型和目标类型配置

* 修改`getActionTypeName`和`getActionTypeTag`函数，添加所有动作类型

* 更新动作类型下拉选项，包含所有5大类动作

* 扩展目标类型下拉选项，包含8种目标类型

### 步骤2：实现动态参数配置UI

* 根据动作类型和目标类型的组合，显示不同的表单字段

* 为每种组合实现对应的UI组件（下拉多选、文本输入、计算配置器等）

* 实现字段的条件显示/隐藏逻辑

### 步骤3：更新动作参数处理逻辑

* 修改`handleActionTypeChange`函数，为每种动作类型设置默认参数

* 更新`updateActionParams`函数，支持复杂参数结构

* 实现目标对象的动态加载逻辑

### 步骤4：添加表单验证

* 为必填字段添加验证规则

* 实现实时验证反馈

* 确保所有动作配置完整有效

### 步骤5：集成计算配置器

* 为"设置变量"动作类型添加计算配置器弹窗

* 实现配置器的打开、关闭和数据传递

## 3. 技术实现

### 核心函数修改

* `getActionTypeName` - 扩展支持所有动作类型

* `getActionTypeTag` - 更新标签颜色映射

* `handleActionTypeChange` - 为每种动作类型设置默认参数

* `updateActionParams` - 支持复杂参数结构

### 新功能实现

* 动态表单生成逻辑

* 目标对象下拉加载

* 计算配置器组件

## 4. 预期效果

完成后，动作配置组件将支持用户提供的所有动作类型和目标类型组合，具有：

* 直观的分类动作选择

* 动态变化的参数表单

* 多选项下拉列表

* 特定动作的特殊处理

* 完整的表单验证

## 5. 测试计划

* 测试所有动作类型的参数表单显示

* 验证目标类型与动作类型的匹配关系

* 测试表单数据的保存和加载

* 验证计算配置器的功能

* 确保与现有动作执行引擎兼容

